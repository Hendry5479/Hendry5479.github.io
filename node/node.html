<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>module..exports 和 exports的区别 | 英俊的大亨亨</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="heng.png">
    <meta name="description" content="记录下有趣岁月的点点滴滴">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.b51e4ccd.js" as="script"><link rel="preload" href="/assets/js/2.7229199a.js" as="script"><link rel="preload" href="/assets/js/37.084d12aa.js" as="script"><link rel="prefetch" href="/assets/js/10.00f8a9d8.js"><link rel="prefetch" href="/assets/js/100.78dfd44a.js"><link rel="prefetch" href="/assets/js/101.cdae98a0.js"><link rel="prefetch" href="/assets/js/102.6a3dd9e0.js"><link rel="prefetch" href="/assets/js/103.cfed07a2.js"><link rel="prefetch" href="/assets/js/104.a16a4843.js"><link rel="prefetch" href="/assets/js/105.9cd1add0.js"><link rel="prefetch" href="/assets/js/106.546c1ad8.js"><link rel="prefetch" href="/assets/js/107.04b38bf9.js"><link rel="prefetch" href="/assets/js/108.31a22b61.js"><link rel="prefetch" href="/assets/js/109.1f2a1840.js"><link rel="prefetch" href="/assets/js/11.e2689dc6.js"><link rel="prefetch" href="/assets/js/110.9dc2f13b.js"><link rel="prefetch" href="/assets/js/111.35cf70f8.js"><link rel="prefetch" href="/assets/js/112.39a6579b.js"><link rel="prefetch" href="/assets/js/113.cbfc279d.js"><link rel="prefetch" href="/assets/js/114.878470a2.js"><link rel="prefetch" href="/assets/js/115.86dc4d8e.js"><link rel="prefetch" href="/assets/js/116.d2e05b2c.js"><link rel="prefetch" href="/assets/js/117.7525671d.js"><link rel="prefetch" href="/assets/js/118.a5c04c6d.js"><link rel="prefetch" href="/assets/js/119.613a81e1.js"><link rel="prefetch" href="/assets/js/12.0b7aaea4.js"><link rel="prefetch" href="/assets/js/120.ec6d3159.js"><link rel="prefetch" href="/assets/js/121.6705f783.js"><link rel="prefetch" href="/assets/js/122.7b3fe034.js"><link rel="prefetch" href="/assets/js/123.9336f454.js"><link rel="prefetch" href="/assets/js/124.dca9fc87.js"><link rel="prefetch" href="/assets/js/125.338aa4d8.js"><link rel="prefetch" href="/assets/js/126.a731a9eb.js"><link rel="prefetch" href="/assets/js/127.da74dd90.js"><link rel="prefetch" href="/assets/js/128.3d5e86f2.js"><link rel="prefetch" href="/assets/js/129.ee43b65c.js"><link rel="prefetch" href="/assets/js/13.31064a46.js"><link rel="prefetch" href="/assets/js/130.8a273d75.js"><link rel="prefetch" href="/assets/js/131.a89df4ac.js"><link rel="prefetch" href="/assets/js/132.0daac28c.js"><link rel="prefetch" href="/assets/js/133.b1f23c92.js"><link rel="prefetch" href="/assets/js/134.78621a9c.js"><link rel="prefetch" href="/assets/js/135.f0884a8b.js"><link rel="prefetch" href="/assets/js/136.45114430.js"><link rel="prefetch" href="/assets/js/137.eb295fce.js"><link rel="prefetch" href="/assets/js/138.cc7dc8d3.js"><link rel="prefetch" href="/assets/js/139.c9b1aad6.js"><link rel="prefetch" href="/assets/js/14.0be4ee49.js"><link rel="prefetch" href="/assets/js/15.685fab30.js"><link rel="prefetch" href="/assets/js/16.97f8b16a.js"><link rel="prefetch" href="/assets/js/17.9c7bebeb.js"><link rel="prefetch" href="/assets/js/18.965d9e47.js"><link rel="prefetch" href="/assets/js/19.3d59a8e1.js"><link rel="prefetch" href="/assets/js/20.1573d510.js"><link rel="prefetch" href="/assets/js/21.f46234dd.js"><link rel="prefetch" href="/assets/js/22.6c16fd38.js"><link rel="prefetch" href="/assets/js/23.50a2a38a.js"><link rel="prefetch" href="/assets/js/24.8aff8273.js"><link rel="prefetch" href="/assets/js/25.35a7c496.js"><link rel="prefetch" href="/assets/js/26.af233874.js"><link rel="prefetch" href="/assets/js/27.a3a96a5a.js"><link rel="prefetch" href="/assets/js/28.a1d49602.js"><link rel="prefetch" href="/assets/js/29.174b7d7d.js"><link rel="prefetch" href="/assets/js/3.6038f64c.js"><link rel="prefetch" href="/assets/js/30.a4115d32.js"><link rel="prefetch" href="/assets/js/31.1522875a.js"><link rel="prefetch" href="/assets/js/32.35da527d.js"><link rel="prefetch" href="/assets/js/33.814d63e8.js"><link rel="prefetch" href="/assets/js/34.615b49c1.js"><link rel="prefetch" href="/assets/js/35.856ab789.js"><link rel="prefetch" href="/assets/js/36.2987bc62.js"><link rel="prefetch" href="/assets/js/38.088f3091.js"><link rel="prefetch" href="/assets/js/39.4ea066d5.js"><link rel="prefetch" href="/assets/js/4.c610d016.js"><link rel="prefetch" href="/assets/js/40.97850ba9.js"><link rel="prefetch" href="/assets/js/41.8b8ae086.js"><link rel="prefetch" href="/assets/js/42.8ae2cac3.js"><link rel="prefetch" href="/assets/js/43.f8a28187.js"><link rel="prefetch" href="/assets/js/44.5160f68a.js"><link rel="prefetch" href="/assets/js/45.6d4b7130.js"><link rel="prefetch" href="/assets/js/46.44693348.js"><link rel="prefetch" href="/assets/js/47.eb0ac18a.js"><link rel="prefetch" href="/assets/js/48.ce1c6335.js"><link rel="prefetch" href="/assets/js/49.7ec1b16a.js"><link rel="prefetch" href="/assets/js/5.216dfe20.js"><link rel="prefetch" href="/assets/js/50.1f503aa4.js"><link rel="prefetch" href="/assets/js/51.47971163.js"><link rel="prefetch" href="/assets/js/52.e5f681d7.js"><link rel="prefetch" href="/assets/js/53.df89fbb7.js"><link rel="prefetch" href="/assets/js/54.a140a8dd.js"><link rel="prefetch" href="/assets/js/55.5809711e.js"><link rel="prefetch" href="/assets/js/56.3a62759d.js"><link rel="prefetch" href="/assets/js/57.c9bd4339.js"><link rel="prefetch" href="/assets/js/58.acb475d1.js"><link rel="prefetch" href="/assets/js/59.61cf3322.js"><link rel="prefetch" href="/assets/js/6.73a8f323.js"><link rel="prefetch" href="/assets/js/60.aa39146e.js"><link rel="prefetch" href="/assets/js/61.f62972b8.js"><link rel="prefetch" href="/assets/js/62.79fc1ddc.js"><link rel="prefetch" href="/assets/js/63.808c750c.js"><link rel="prefetch" href="/assets/js/64.4e99e2e1.js"><link rel="prefetch" href="/assets/js/65.f112caec.js"><link rel="prefetch" href="/assets/js/66.422cc6c9.js"><link rel="prefetch" href="/assets/js/67.f504a803.js"><link rel="prefetch" href="/assets/js/68.f8e84a65.js"><link rel="prefetch" href="/assets/js/69.af07ae00.js"><link rel="prefetch" href="/assets/js/7.a6e60d89.js"><link rel="prefetch" href="/assets/js/70.9b212396.js"><link rel="prefetch" href="/assets/js/71.049b7d3e.js"><link rel="prefetch" href="/assets/js/72.b508f834.js"><link rel="prefetch" href="/assets/js/73.52a25a21.js"><link rel="prefetch" href="/assets/js/74.68de4c01.js"><link rel="prefetch" href="/assets/js/75.c0d8e99a.js"><link rel="prefetch" href="/assets/js/76.672b246e.js"><link rel="prefetch" href="/assets/js/77.36d886e3.js"><link rel="prefetch" href="/assets/js/78.079ebfd8.js"><link rel="prefetch" href="/assets/js/79.d3d3e8ea.js"><link rel="prefetch" href="/assets/js/8.a72c567f.js"><link rel="prefetch" href="/assets/js/80.c690c3d9.js"><link rel="prefetch" href="/assets/js/81.c012b7d5.js"><link rel="prefetch" href="/assets/js/82.47ffa460.js"><link rel="prefetch" href="/assets/js/83.2ba84114.js"><link rel="prefetch" href="/assets/js/84.dc0bf5a8.js"><link rel="prefetch" href="/assets/js/85.d968ae8b.js"><link rel="prefetch" href="/assets/js/86.91000a3b.js"><link rel="prefetch" href="/assets/js/87.6e885c71.js"><link rel="prefetch" href="/assets/js/88.99dd2b79.js"><link rel="prefetch" href="/assets/js/89.601c57ea.js"><link rel="prefetch" href="/assets/js/9.c59ba06b.js"><link rel="prefetch" href="/assets/js/90.89ee0da5.js"><link rel="prefetch" href="/assets/js/91.854de449.js"><link rel="prefetch" href="/assets/js/92.7a25d006.js"><link rel="prefetch" href="/assets/js/93.17f89281.js"><link rel="prefetch" href="/assets/js/94.0f6749b9.js"><link rel="prefetch" href="/assets/js/95.41ef6f4a.js"><link rel="prefetch" href="/assets/js/96.12427920.js"><link rel="prefetch" href="/assets/js/97.53036963.js"><link rel="prefetch" href="/assets/js/98.43d8f870.js"><link rel="prefetch" href="/assets/js/99.4ab32fce.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/heng.png" alt="英俊的大亨亨" class="logo"> <span class="site-name can-hide">英俊的大亨亨</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">js</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js-基础.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js-数组.html" class="nav-link">
  数组
</a></li><li class="dropdown-item"><!----> <a href="/js/js-异步.html" class="nav-link">
  异步
</a></li><li class="dropdown-item"><!----> <a href="/js/js-es6.html" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/js/js-v8引擎.html" class="nav-link">
  v8
</a></li><li class="dropdown-item"><!----> <a href="/手写代码/1.js基础.html" class="nav-link">
  手写
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/process.html" class="nav-link">
  
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/node.html" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="leetcode" class="dropdown-title"><span class="title">leetcode</span> <span class="arrow down"></span></button> <button type="button" aria-label="leetcode" class="mobile-dropdown-title"><span class="title">leetcode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/代码随想录/1.数组.html" class="nav-link">
  1.数组
</a></li><li class="dropdown-item"><!----> <a href="/代码随想录/10.动态规划/1.基础.html" class="nav-link">
  10.动态规划
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react源码/理念.html" class="nav-link">
  1.理念
</a></li><li class="dropdown-item"><!----> <a href="/react源码/3.render.html" class="nav-link">
  3.render
</a></li><li class="dropdown-item"><!----> <a href="/react源码/4.commit.html" class="nav-link">
  4.commit
</a></li><li class="dropdown-item"><!----> <a href="/react源码/5.状态更新.html" class="nav-link">
  5.状态更新
</a></li><li class="dropdown-item"><!----> <a href="/react源码/6.diff.html" class="nav-link">
  6.diff
</a></li><li class="dropdown-item"><!----> <a href="/react/7.实现hooks.html" class="nav-link">
  7.实现hooks
</a></li><li class="dropdown-item"><!----> <a href="/react/8.concurrentMode.html" class="nav-link">
  8.concurrentMode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/1.配置.html" class="nav-link">
  1.配置
</a></li><li class="dropdown-item"><!----> <a href="/webpack/2.loader.html" class="nav-link">
  2.loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/3.plugin.html" class="nav-link">
  3.plugin
</a></li><li class="dropdown-item"><!----> <a href="/webpack/4.模块化原理.html" class="nav-link">
  4.模块化原理
</a></li><li class="dropdown-item"><!----> <a href="/webpack/5.babel.html" class="nav-link">
  5.babel
</a></li><li class="dropdown-item"><!----> <a href="/webpack/6.HMR.html" class="nav-link">
  6.HMR
</a></li><li class="dropdown-item"><!----> <a href="/webpack/7.环境分离.html" class="nav-link">
  7.环境分离
</a></li><li class="dropdown-item"><!----> <a href="/webpack/8.tree_shaking.html" class="nav-link">
  8.tree_shaking
</a></li><li class="dropdown-item"><!----> <a href="/webpack/9,源码.html" class="nav-link">
  9.源码
</a></li><li class="dropdown-item"><!----> <a href="/webpack/11.自定义loader.html" class="nav-link">
  11.自定义loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/12.自定义plugin.html" class="nav-link">
  12.自定义plugin
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/设计模式/创建型.html" class="nav-link">
  创建型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  结构型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/行为型.html" class="nav-link">
  行为型
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">angular</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">angular</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">健身</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">健身</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><a href="/me.html" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">js</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js-基础.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js-数组.html" class="nav-link">
  数组
</a></li><li class="dropdown-item"><!----> <a href="/js/js-异步.html" class="nav-link">
  异步
</a></li><li class="dropdown-item"><!----> <a href="/js/js-es6.html" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/js/js-v8引擎.html" class="nav-link">
  v8
</a></li><li class="dropdown-item"><!----> <a href="/手写代码/1.js基础.html" class="nav-link">
  手写
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/process.html" class="nav-link">
  
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/node.html" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="leetcode" class="dropdown-title"><span class="title">leetcode</span> <span class="arrow down"></span></button> <button type="button" aria-label="leetcode" class="mobile-dropdown-title"><span class="title">leetcode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/代码随想录/1.数组.html" class="nav-link">
  1.数组
</a></li><li class="dropdown-item"><!----> <a href="/代码随想录/10.动态规划/1.基础.html" class="nav-link">
  10.动态规划
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react源码/理念.html" class="nav-link">
  1.理念
</a></li><li class="dropdown-item"><!----> <a href="/react源码/3.render.html" class="nav-link">
  3.render
</a></li><li class="dropdown-item"><!----> <a href="/react源码/4.commit.html" class="nav-link">
  4.commit
</a></li><li class="dropdown-item"><!----> <a href="/react源码/5.状态更新.html" class="nav-link">
  5.状态更新
</a></li><li class="dropdown-item"><!----> <a href="/react源码/6.diff.html" class="nav-link">
  6.diff
</a></li><li class="dropdown-item"><!----> <a href="/react/7.实现hooks.html" class="nav-link">
  7.实现hooks
</a></li><li class="dropdown-item"><!----> <a href="/react/8.concurrentMode.html" class="nav-link">
  8.concurrentMode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/1.配置.html" class="nav-link">
  1.配置
</a></li><li class="dropdown-item"><!----> <a href="/webpack/2.loader.html" class="nav-link">
  2.loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/3.plugin.html" class="nav-link">
  3.plugin
</a></li><li class="dropdown-item"><!----> <a href="/webpack/4.模块化原理.html" class="nav-link">
  4.模块化原理
</a></li><li class="dropdown-item"><!----> <a href="/webpack/5.babel.html" class="nav-link">
  5.babel
</a></li><li class="dropdown-item"><!----> <a href="/webpack/6.HMR.html" class="nav-link">
  6.HMR
</a></li><li class="dropdown-item"><!----> <a href="/webpack/7.环境分离.html" class="nav-link">
  7.环境分离
</a></li><li class="dropdown-item"><!----> <a href="/webpack/8.tree_shaking.html" class="nav-link">
  8.tree_shaking
</a></li><li class="dropdown-item"><!----> <a href="/webpack/9,源码.html" class="nav-link">
  9.源码
</a></li><li class="dropdown-item"><!----> <a href="/webpack/11.自定义loader.html" class="nav-link">
  11.自定义loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/12.自定义plugin.html" class="nav-link">
  12.自定义plugin
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/设计模式/创建型.html" class="nav-link">
  创建型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  结构型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/行为型.html" class="nav-link">
  行为型
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">angular</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">angular</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">健身</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">健身</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><a href="/me.html" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Node</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node/node.html" aria-current="page" class="active sidebar-link">module..exports 和 exports的区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node/node.html#fs-file-system" class="sidebar-link">fs：File System</a></li><li class="sidebar-sub-header"><a href="/node/node.html#包管理工具" class="sidebar-link">包管理工具</a></li><li class="sidebar-sub-header"><a href="/node/node.html#events模块" class="sidebar-link">events模块</a></li><li class="sidebar-sub-header"><a href="/node/node.html#buffer" class="sidebar-link">Buffer</a></li><li class="sidebar-sub-header"><a href="/node/node.html#simple-demo" class="sidebar-link">Simple Demo</a></li><li class="sidebar-sub-header"><a href="/node/node.html#中间件" class="sidebar-link">中间件</a></li><li class="sidebar-sub-header"><a href="/node/node.html#title-basiccategories-nodejstags-node" class="sidebar-link">title: basic
categories: nodejs
tags: node</a></li><li class="sidebar-sub-header"><a href="/node/node.html#path" class="sidebar-link">path</a></li><li class="sidebar-sub-header"><a href="/node/node.html#title-modulecategories-nodejstags-node" class="sidebar-link">title: module
categories: nodejs
tags: node</a></li><li class="sidebar-sub-header"><a href="/node/node.html#exports导出" class="sidebar-link">exports导出</a></li><li class="sidebar-sub-header"><a href="/node/node.html#模块加载顺序" class="sidebar-link">模块加载顺序</a></li><li class="sidebar-sub-header"><a href="/node/node.html#title-event-loopcategories-nodejstags-node" class="sidebar-link">title: event loop
categories: nodejs
tags: node</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="module-exports-和-exports的区别"><a href="#module-exports-和-exports的区别" class="header-anchor">#</a> module..exports 和 exports的区别</h3> <p>在node中，执行模块导出的是module类，所以真正做导出的是module.exports</p> <p>exports 是 module.exports 的一个引用</p> <p>cjs并没有module这个概念，这是cjs和node的一个差异</p> <p>Node内置模块</p> <p>path</p> <p>window使用 \分隔符；Linux使用 /；
可移植操作系统接口（英语：Portable Operating System Interface，缩写为POSIX）</p> <p>path常见API</p> <p>dirname：获取文件的父文件夹；
basename：获取文件名；
extname：获取文件扩展名；
路径拼接：path.join，将文件和文件夹拼接：path.resolve</p> <p>resolve函数会判断拼接的路径前面是否有 /或../或./，会返回对应的拼接路径；</p> <h2 id="fs-file-system"><a href="#fs-file-system" class="header-anchor">#</a> fs：File System</h2> <p>API提供三种操作方式：
方式一：同步
方式二：异步回调函数，传入回调函数
方式三：异步Promise，代码不阻塞，通过 fs.promises 调用，返回Promise，通过then、catch处理</p> <h3 id="文件描述符-file-descriptors"><a href="#文件描述符-file-descriptors" class="header-anchor">#</a> 文件描述符 File descriptors</h3> <p>在 POSIX 系统上，每个进程，内核都维护着一张当前打开着的文件和资源的表格</p> <p>每个打开的文件都分配了一个称为文件描述符的数字标识符，文件操作都使用文件描述符来标识和跟踪文件</p> <p>fs.open() ：分配新的文件描述符，文件描述符可读写、查</p> <h3 id="文件的读写"><a href="#文件的读写" class="header-anchor">#</a> 文件的读写</h3> <p>fs.readFile(path[, options], callback)
fs.writeFile(file, data[, options], callback)</p> <p>![image-20211013213551599](/Users/hendry5479/Library/Application Support/typora-user-images/image-20211013213551599.png)</p> <p>在上面的代码中，你会发现有一个大括号没有填写任何的内容，这个是写入时填写的option参数：
flag：写入的方式。
encoding：字符的编码；</p> <h3 id="flag选项"><a href="#flag选项" class="header-anchor">#</a> flag选项</h3> <p>w 打开文件写入，默认值；
w+打开文件进行读写，不存在则创建文件；
r+ 打开文件进行读写，不存在那么抛出异常；</p> <p>r打开文件读取，读取时的默认值；
a打开要写入的文件，将流放在文件末尾。如果不存在则创建文件；
a+打开文件以进行读写，将流放在文件末尾。如果不存在则创建文件</p> <h3 id="文件夹操作"><a href="#文件夹操作" class="header-anchor">#</a> 文件夹操作</h3> <p>新建文件夹：fs.mkdir()或fs.mkdirSync()
获取文件夹的内容:
文件重命名：
文件夹操作：</p> <h2 id="包管理工具"><a href="#包管理工具" class="header-anchor">#</a> 包管理工具</h2> <p>scripts：配置脚本命令</p> <p>dependencies：无论开发还是生成环境都需要依赖的包</p> <p>devDependencies：在生成环境不需要，比如webpack、babel等，<code>npm install webpack --save-dev</code>，安装到devDependencies</p> <h4 id="版本规范"><a href="#版本规范" class="header-anchor">#</a> 版本规范</h4> <p>semver版本规范是X.Y.Z:</p> <p>X 主版本号(major)：当你做了不兼容的 API 修改(可能不兼容之前的版本);</p> <p>Y 次版本号(minor)：当你做了向下兼容的功能性新增(新功能增加，但是兼容之前的版本);</p> <p>Z 修订号(patch)：当你做了向下兼容的问题修正(没有新功能，修复bug);</p> <h4 id="和-的区别"><a href="#和-的区别" class="header-anchor">#</a> ^和~的区别:</h4> <p>^x.y.z：x不变，y和z安装最新</p> <p>~x.y.z:表示x和y不变的，z最新</p> <h2 id="events模块"><a href="#events模块" class="header-anchor">#</a> events模块</h2> <p>Node中的核心API基于异步事件驱动
发出事件和监听事件都通过EventEmitter完成，它们都属于events对象
emitter.on(eventName, listener)：监听事件，也可以使用addListener；
emitter.off(eventName, listener)：移除事件监听，也可以使用removeListener；
emitter.emit(eventName[, ...args])：发出事件，可以携带一些参数；</p> <h3 id="常见的属性"><a href="#常见的属性" class="header-anchor">#</a> 常见的属性</h3> <p>EventEmitter的实例属性
emitter.eventNames()：返回EventEmitter对象注册的事件字符串数组；
emitter.getMaxListeners()：返回最大监听器数量，通过setMaxListeners() 修改，默认10
emitter.listenerCount(事件名称)：返回EventEmitter对象某一个事件名称，监听器的个数；
emitter.listeners(事件名称)：返回EventEmitter对象某个事件监听器上所有的监听器数组；</p> <h3 id="方法的补充"><a href="#方法的补充" class="header-anchor">#</a> 方法的补充</h3> <p>emitter.once(eventName, listener)：事件监听一次
emitter.prependListener()：将监听事件添加到最前面
emitter.prependOnceListener()：将监听事件添加到最前面，但是只监听一次
emitter.removeAllListeners([eventName])：移除所有的监听器</p> <h2 id="buffer"><a href="#buffer" class="header-anchor">#</a> Buffer</h2> <p>字节byte = 8位
<strong>1.create new Buffer</strong></p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token keyword">const</span> buffer <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
</code></pre></div><p>中文一般是3个字节
<strong>2.解码</strong>
buffer.toString()  默认utf8</p> <p><strong>3.alloc</strong>
buffer = Buffer.alloc(8)
buffer[1] = 0x88</p> <p><strong>4.文件</strong></p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 读取文本文件</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./foo.txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 读取图片文件</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./bar.png&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;./foo.png&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h1 id="express框架"><a href="#express框架" class="header-anchor">#</a> Express框架</h1> <p>Express是一个路由和中间件的Web框架，它本身的功能非常少
Express应用程序本质是一系列中间件函数的调用</p> <h2 id="simple-demo"><a href="#simple-demo" class="header-anchor">#</a> Simple Demo</h2> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// /home的get请求处理</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Home&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// /login的post请求处理</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 开启监听</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务器启动成功~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="中间件"><a href="#中间件" class="header-anchor">#</a> 中间件</h2> <p>本质：传递给express的一个回调函数
回调函数接受三个参数：request对象、response对象、next函数
next：在express中定义的用于执行下一个中间件的函数
中间件执行哪些任务：
执行任何代码、更改request和response对象、结束请求-响应周期、调用栈中的下一个中间件</p> <p>如果当前中间件没有结束周期，必须调用next将控制权传递给下一个中间件，否则请求将被挂起</p> <hr> <h2 id="title-basiccategories-nodejstags-node"><a href="#title-basiccategories-nodejstags-node" class="header-anchor">#</a> title: basic
categories: nodejs
tags: node</h2> <h1 id="node的repl"><a href="#node的repl" class="header-anchor">#</a> Node的REPL</h1> <p>REPL是Read-Eval-Print Loop的简称，翻译为“读取-求值-输出”循环，是交互式的编程环境</p> <ul><li><p>举例：浏览器的console和node环境</p></li> <li><p><code>node index.js env=development xxx</code>命令会给node传递参数xxx</p></li> <li><p>获取参数则是在<strong>process</strong>这个内置对象中
<img src="https://cdn.jsdelivr.net/gh/Hendry5479/learn-react/img/20201224125937.png" alt=""></p></li> <li><p>其中的argv属性是一个数组，里面包含了目标参数；</p></li> <li><p>argv属性的由来：在C/C++程序中的main可以获取到两个参数：</p> <ul><li>argc：argument counter，传递参数的个数</li> <li>argv：argument vector，传入的具体参数</li></ul></li> <li><p>vector在C++、Java中是一种数组结构，在JavaScript中也是数组，用于存储参数信息；</p></li> <li><p>在代码中将参数信息遍历：</p></li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="特殊的全局对象"><a href="#特殊的全局对象" class="header-anchor">#</a> 特殊的全局对象</h1> <ul><li>这些全局对象可以在模块中任意使用，但是在命令行交互中不可以使用；</li> <li>包括：<strong>__dirname、__filename、exports、module、require()</strong></li></ul> <h3 id="dirname"><a href="#dirname" class="header-anchor">#</a> __dirname</h3> <p>获取当前文件所在的路径</p> <h3 id="filename"><a href="#filename" class="header-anchor">#</a> __filename</h3> <p>获取当前文件所在的路径和文件名称</p> <h1 id="常见的全局对象"><a href="#常见的全局对象" class="header-anchor">#</a> 常见的全局对象</h1> <h3 id="process"><a href="#process" class="header-anchor">#</a> process</h3> <ul><li>提供Node进程相关的信息，比如运行环境、参数信息等；</li> <li>相对路径取决于process.cwd, process.cwd是启动项目的文件夹路径,不同的文件夹中发送启动命令会有不同的相对路径</li></ul> <h3 id="console"><a href="#console" class="header-anchor">#</a> console</h3> <p>提供了调试控制台</p> <h4 id="定时器函数"><a href="#定时器函数" class="header-anchor">#</a> 定时器函数</h4> <ul><li>setTimeout(callback, delay[, ...args])：callback在delay毫秒后执行一次；</li> <li>setInterval(callback, delay[, ...args])：callback每delay毫秒重复执行一次；</li> <li>setImmediate(callback[, ...args])：callback在IO事件后的回调的“立即”执行；</li> <li>process.nextTick(callback[, ...args])：添加到下一次tick队列中；</li></ul> <h3 id="global"><a href="#global" class="header-anchor">#</a> global</h3> <p>process、console、setTimeout等都有被放到global中</p> <p><strong>window和global的区别是什么？</strong></p> <ul><li>在浏览器中，全局变量在window上，比如document、setInterval、alert、console等</li> <li>在浏览器中执行的代码，如果在顶级范围内通过var定义一个属性，默认会被添加到window</li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'c'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c</span>
</code></pre></div><ul><li>在node中通过var定义变量，它只是在当前模块中，不会放到全局中：</li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'c'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>global<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre></div><hr> <hr> <h2 id="path"><a href="#path" class="header-anchor">#</a> path</h2> <ul><li>window使用 \或者 \ 作为分隔符，目前也支持 /</li> <li>在Mac OS、Linux的Unix操作系统上使用 / 来作为文件路径的分隔符；</li></ul> <h3 id="path常见的api"><a href="#path常见的api" class="header-anchor">#</a> path常见的API</h3> <ul><li>dirname：获取文件的父文件夹；</li> <li>basename：获取文件名；</li> <li>extname：获取文件扩展名；</li> <li>路径的拼接：path.join(basepath, filename)</li> <li>将文件和文件夹拼接：path.resolve()</li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> basePath <span class="token operator">=</span> <span class="token string">'/User/why'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> filename <span class="token operator">=</span> <span class="token string">'../abc.txt'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> filepath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>basePath<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// D:\User\abc.txt</span>
</code></pre></div><p>resolve会判断拼接路径前面是否有 /或../或./，会返回对应的拼接路径；</p> <h1 id="fs-file-system-2"><a href="#fs-file-system-2" class="header-anchor">#</a> fs：File System</h1> <p>API提供三种操作方式：
方式一：同步，代码阻塞
方式二：异步回调，代码不阻塞，传入回调函数，当获取到结果时，回调函数被执行
方式三：异步Promise，代码不阻塞，通过 fs.promises 调用，返回Promise，通过then、catch处理</p> <p><strong>文件描述符 File descriptors</strong>
在 POSIX 系统上，每个进程，内核都维护着一张当前打开着的文件和资源的表格
每个打开的文件都分配了一个文件描述符，文件操作都使用文件描述符来标识和跟踪文件</p> <p><strong>fs.open()</strong>：分配新的文件描述符，可用于读写或请求文件信息</p> <h4 id="文件的读写-2"><a href="#文件的读写-2" class="header-anchor">#</a> 文件的读写</h4> <p><code>fs.readFile(path[, options], callback)</code> <code>fs.writeFile(file, data[, options], callback)</code> <strong>文件写入</strong>：</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'../foo.txt'</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>大括号是option参数：flag：写入的方式，encoding：字符的编码</p> <ul><li>flag选项：
<ul><li>w 打开文件写入， w+如果不存在则创建文件；</li> <li>r+ 打开文件读写，不存在则抛出异常，r打开文件读取，读取时的默认值；</li> <li>a打开要写入的文件，将流放在文件末尾。如果不存在则创建文件；</li> <li>a+打开文件以进行读写，将流放在文件末尾。如果不存在则创建文件</li></ul></li></ul> <h4 id="文件夹操作-2"><a href="#文件夹操作-2" class="header-anchor">#</a> 文件夹操作</h4> <ul><li>新建文件夹：fs.mkdir()或fs.mkdirSync()</li> <li>获取文件夹的内容</li> <li>文件写入：</li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">readFolders</span><span class="token punctuation">(</span><span class="token parameter">folder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span>folder<span class="token punctuation">,</span> <span class="token punctuation">{</span>withFileTypes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">file</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newFolder <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dirname<span class="token punctuation">,</span> file<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">readFolders</span><span class="token punctuation">(</span>newFolder<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">readFolders</span><span class="token punctuation">(</span>dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>文件重命名
<code>fs.rename('../why', '../coder', err =&gt; {})</code></li></ul> <h1 id="events模块-2"><a href="#events模块-2" class="header-anchor">#</a> events模块</h1> <p>Node的核心API都基于<strong>异步事件驱动</strong>
对象<strong>Emitters</strong>发出事件，监听这个事件Listeners，传入回调函数
回调函数会在监听到事件时调用</p> <p>发出和监听事件都通过<strong>EventEmitter</strong>完成，它们都属于events对象
emitter.on(name, listener)：监听事件，也可以使用addListener；
emitter.off(name, listener)：移除事件监听，也可以使用removeListener；
emitter.emit(name[, ...args])：发出事件，可以携带参数；</p> <p><strong>emitter常见的属性</strong>
eventNames()：返回EventEmitter对象注册的事件字符串数组
getMaxListeners()：返回最大监听器数量，通过setMaxListeners()修改，默认10
listenerCount(事件名称)：返回某一个事件名称，监听器个数；
listeners(事件名称)：返回监听器上所有的监听器数组；</p> <p><strong>方法补充</strong>
once(name, listener)：事件监听一次
prependListener()：将监听事件添加到最前面
prependOnceListener()：将监听事件添加到最前面，但是只监听一次
removeAllListeners([name])：移除监听器</p> <hr> <h2 id="title-modulecategories-nodejstags-node"><a href="#title-modulecategories-nodejstags-node" class="header-anchor">#</a> title: module
categories: nodejs
tags: node</h2> <h1 id="commonjs规范"><a href="#commonjs规范" class="header-anchor">#</a> CommonJS规范</h1> <p>Node是CommonJS在服务器端一个具有代表性的实现；
Browserify是CommonJS在浏览器中的一种实现；
webpack打包工具具备对CommonJS的支持和转换</p> <p>node模块化开发：核心是导出和导入
每一个js文件都是一个单独的模块，有自己的作用域
模块包括CommonJS规范的核心变量：exports、module.exports、require；</p> <h2 id="exports导出"><a href="#exports导出" class="header-anchor">#</a> exports导出</h2> <p>exports是一个对象，可以在这个对象中添加属性，添加的属性会导出</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// bar.js</span>
exports<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sayHello <span class="token operator">=</span> sayHello<span class="token punctuation">;</span>
<span class="token comment">// main.js</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> bar<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> bar<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
<span class="token keyword">const</span> sayHello <span class="token operator">=</span> bar<span class="token punctuation">.</span>sayHello<span class="token punctuation">;</span>
</code></pre></div><p>main中的bar变量等于exports对象, bar = bar中的exports
bar对象是exports对象的浅拷贝(本质是引用的赋值)</p> <h1 id="module-exports"><a href="#module-exports" class="header-anchor">#</a> module.exports</h1> <p>Node中导出经常通过module.exports</p> <h3 id="module-exports和exports的区别"><a href="#module-exports和exports的区别" class="header-anchor">#</a> module.exports和exports的区别</h3> <p>CommonJS中没有module.exports的概念
但是为了实现模块导出，Node使用Module类，每一个模块都是Module的一个实例module
所以在Node中用于导出的不是exports，而是module.exports，因为module才是导出的实现者
为什么exports也可以导出呢？因为module对象的exports属性是exports对象的引用
<code>module.exports = exports = main中的bar</code></p> <p>导出模块内容的是module.exports，为了实现CommonJS规范，module.exports对exports对象有引用</p> <h1 id="require"><a href="#require" class="header-anchor">#</a> require</h1> <p>require的查找规则：https://nodejs.org/dist/latest-v14.x/docs/api/modules.html#modules_all_together
导入格式：require(X)
<strong>情况一：X是核心模块，比如path、http</strong>
直接返回核心模块，并停止查找</p> <p><strong>情况二：X是以 ./ 或 ../ 或 /（根目录）开头的</strong>
查找目录下面的index
1&gt; 查找X/index.js
2&gt; 查找X/index.json
3&gt; 查找X/index.node
1.如果有后缀名，按照后缀名的格式查找对应的文件
2.如果没有后缀名，会按照如下顺序：
1&gt; 直接查找文件X
2&gt; 查找X.js
3&gt; 查找X.json
4&gt; 查找X.node
第一步：将X当做一个文件在对应的目录下查找；
第二步：没有找到对应的文件，将X作为一个目录
如果没有找到，那么报错：not found</p> <p><strong>情况三：直接是一个X（没有路径），并且X不是一个核心模块</strong>
按顺序查找node_modules</p> <h2 id="模块加载顺序"><a href="#模块加载顺序" class="header-anchor">#</a> 模块加载顺序</h2> <p>模块第一次引入时，模块中的js代码会被运行一次
模块被多次引入时，会缓存，最终只加载（运行）一次
因为模块对象module都有一个属性：<strong>loaded</strong>，为true表示已加载</p> <p>如果有循环引入，那么加载顺序是什么？
可以将加载顺序看作是一个图结构，图结构的遍历有DFS和BFS，Node采用DFS</p> <div class="language- extra-class"><pre class="language-text"><code>// main.js
const a = require('./a');
// a.js
const b = require(&quot;./b&quot;);
// b.js
const a = require(&quot;./a&quot;);
</code></pre></div><p>加载顺序：main -&gt; a -&gt; b</p> <h1 id="es-module"><a href="#es-module" class="header-anchor">#</a> ES Module</h1> <p>ES Module和CommonJS的模块化的不同之处：
使用import和export关键字
采用编译期静态类型检测，并且动态引用的方式
采用export和import关键字来实现模块化</p> <hr> <h2 id="title-event-loopcategories-nodejstags-node"><a href="#title-event-loopcategories-nodejstags-node" class="header-anchor">#</a> title: event loop
categories: nodejs
tags: node</h2> <p>JavaScript是单线程的,浏览器是多进程的,每个tab都是一个进程
每个进程中就包括执行js代码的线程</p> <p>浏览器的事件循环
js代码中有异步操作时，异步操作会被放入调用栈，执行会立即结束，不阻塞后面代码
而异步操作会在合适时机加入事件队列，事件队列将异步操作放入调用栈，再被执行</p> <p>宏任务和微任务
事件循环维护两个队列
宏任务队列（macrotask queue）：ajax、setTimeout、setInterval、DOM监听、UI Rendering等
微任务队列（microtask queue）：Promise的then回调、 Mutation Observer API、queueMicrotask()等</p> <p>优先级：
1.main script中代码优先执行（顶层script代码）
2.宏任务执行之前，必须保证微任务队列是空的；如果不为空，优先执行微任务队列的任务</p> <p>面试题：执行结果如何？</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;set1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;pr1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;set2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">queueMicrotask</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;queueMicrotask1&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>执行结果：
pr1
2
then1
queueMicrotask1
then3
set1
then2
then4
set2</p> <h1 id="buffer-2"><a href="#buffer-2" class="header-anchor">#</a> Buffer</h1> <p>Buffer中存储的是二进制数据
字节byte = 8位二进制<br>
1byte = 8bit，1kb=1024byte，1M=1024kb
编程语言的int类型是4个字节，long类型是8个字节
TCP传输字节流，在写入和读取时都需要说明字节个数
RGB的值分别都是255，所以在计算机中都是用一个字节存储</p> <p><strong>1.create new Buffer</strong></p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token keyword">const</span> buffer <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
</code></pre></div><p>中文一般是3个字节</p> <p><strong>2.解码</strong> <code>buffer.toString()</code> 默认utf8</p> <p><strong>3.alloc</strong> <code>buffer = Buffer.alloc(8)</code> <code>buffer[1] = 0x88</code></p> <p><strong>4.文件</strong></p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./test.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;Buffer 48 65 6c 6c 6f 20 57 6f 72 6c 64&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello World</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./zznh.jpg'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;Buffer ff d8 ff e0 ... 40418 more bytes&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> sharp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'sharp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sharp</span><span class="token punctuation">(</span><span class="token string">'./test.png'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">toBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'./test_copy.png'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h1 id="stream"><a href="#stream" class="header-anchor">#</a> Stream</h1> <p><strong>流的概念</strong>：连续字节的一种表现形式，可读可写
直接读写文件无法控制一些细节的操作；
Node中很多对象基于流实现：http模块的Request和Response，process.stdout
所有的流都是EventEmitter的实例</p> <p><strong>流（Stream）的分类</strong>：
Writable：例如 fs.createWriteStream()
Readable：例如 fs.createReadStream()
Duplex：同时为Readable和Writable,例如 net.Socket
Transform：Duplex可以在写读时修改转换数据的流,例如zlib.createDeflate()</p> <h1 id="readable"><a href="#readable" class="header-anchor">#</a> Readable</h1> <p><code>createReadStream(start, end)</code></p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> read <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot;./foo.txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  start<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  end<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
  highWaterMark<span class="token operator">:</span> <span class="token number">4</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 监听data事件获取读取到的数据；</span>
read<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
read<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">fd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件被打开&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
read<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件读取结束&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
read<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件被关闭&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 在某一个时刻暂停和恢复读取：</span>
read<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  read<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    read<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="writable"><a href="#writable" class="header-anchor">#</a> Writable</h1> <p>createWriteStream(flags, start)
flags：默认w，如果追加写入使用 a或者 a+；</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> writer <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&quot;./foo.txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  flags<span class="token operator">:</span> <span class="token string">&quot;a+&quot;</span><span class="token punctuation">,</span>
  start<span class="token operator">:</span> <span class="token number">8</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;你好啊&quot;</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

writer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件打开&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

writer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;finish&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件写入结束&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <hr> <p>npm install koa, nodemon -D, dotenv, koa-router, koa-bodyparser, mysql2</p> <p>openssl
genrsa -out private.key
rsa -in private.key -pubout -out public.key</p> <p>cookie：存储在客户端，用于辨别身份，分为内存和硬盘cookie，设置过期时间的就是硬盘cookie</p> <p>一般设置max-age，剩余有效时间
domain：指定那些主机可以接受cookie，默认是origin，不包含子域名；如果指定domain，则包含子域名
path：指定主机下的哪些路径可以接受cookie</p> <p>session基于cookie，</p> <p>token：
cookie增加流量、不安全、大小限制、除浏览器外其他端需要手动设置，分布式系统和集群需要确保正确解析session</p> <p>jwt实现token
header
alg：加密算法，默认HS256
typ：通常写JWT
payload
携带的数据
iat签发时间，exp过期时间，通过base64Url编码
signature
secretKey，将前两个结果合并进行HS256算法加密，</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/21/2022, 9:01:05 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b51e4ccd.js" defer></script><script src="/assets/js/2.7229199a.js" defer></script><script src="/assets/js/37.084d12aa.js" defer></script>
  </body>
</html>
