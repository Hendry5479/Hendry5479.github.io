<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>英俊的大亨亨</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="heng.png">
    <meta name="description" content="记录下有趣岁月的点点滴滴">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.b51e4ccd.js" as="script"><link rel="preload" href="/assets/js/2.7229199a.js" as="script"><link rel="preload" href="/assets/js/91.854de449.js" as="script"><link rel="prefetch" href="/assets/js/10.00f8a9d8.js"><link rel="prefetch" href="/assets/js/100.78dfd44a.js"><link rel="prefetch" href="/assets/js/101.cdae98a0.js"><link rel="prefetch" href="/assets/js/102.6a3dd9e0.js"><link rel="prefetch" href="/assets/js/103.cfed07a2.js"><link rel="prefetch" href="/assets/js/104.a16a4843.js"><link rel="prefetch" href="/assets/js/105.9cd1add0.js"><link rel="prefetch" href="/assets/js/106.546c1ad8.js"><link rel="prefetch" href="/assets/js/107.04b38bf9.js"><link rel="prefetch" href="/assets/js/108.31a22b61.js"><link rel="prefetch" href="/assets/js/109.1f2a1840.js"><link rel="prefetch" href="/assets/js/11.e2689dc6.js"><link rel="prefetch" href="/assets/js/110.9dc2f13b.js"><link rel="prefetch" href="/assets/js/111.35cf70f8.js"><link rel="prefetch" href="/assets/js/112.39a6579b.js"><link rel="prefetch" href="/assets/js/113.cbfc279d.js"><link rel="prefetch" href="/assets/js/114.878470a2.js"><link rel="prefetch" href="/assets/js/115.86dc4d8e.js"><link rel="prefetch" href="/assets/js/116.d2e05b2c.js"><link rel="prefetch" href="/assets/js/117.7525671d.js"><link rel="prefetch" href="/assets/js/118.a5c04c6d.js"><link rel="prefetch" href="/assets/js/119.613a81e1.js"><link rel="prefetch" href="/assets/js/12.0b7aaea4.js"><link rel="prefetch" href="/assets/js/120.ec6d3159.js"><link rel="prefetch" href="/assets/js/121.6705f783.js"><link rel="prefetch" href="/assets/js/122.7b3fe034.js"><link rel="prefetch" href="/assets/js/123.9336f454.js"><link rel="prefetch" href="/assets/js/124.dca9fc87.js"><link rel="prefetch" href="/assets/js/125.338aa4d8.js"><link rel="prefetch" href="/assets/js/126.a731a9eb.js"><link rel="prefetch" href="/assets/js/127.da74dd90.js"><link rel="prefetch" href="/assets/js/128.3d5e86f2.js"><link rel="prefetch" href="/assets/js/129.ee43b65c.js"><link rel="prefetch" href="/assets/js/13.31064a46.js"><link rel="prefetch" href="/assets/js/130.8a273d75.js"><link rel="prefetch" href="/assets/js/131.a89df4ac.js"><link rel="prefetch" href="/assets/js/132.0daac28c.js"><link rel="prefetch" href="/assets/js/133.b1f23c92.js"><link rel="prefetch" href="/assets/js/134.78621a9c.js"><link rel="prefetch" href="/assets/js/135.f0884a8b.js"><link rel="prefetch" href="/assets/js/136.45114430.js"><link rel="prefetch" href="/assets/js/137.eb295fce.js"><link rel="prefetch" href="/assets/js/138.cc7dc8d3.js"><link rel="prefetch" href="/assets/js/139.c9b1aad6.js"><link rel="prefetch" href="/assets/js/14.0be4ee49.js"><link rel="prefetch" href="/assets/js/15.685fab30.js"><link rel="prefetch" href="/assets/js/16.97f8b16a.js"><link rel="prefetch" href="/assets/js/17.9c7bebeb.js"><link rel="prefetch" href="/assets/js/18.965d9e47.js"><link rel="prefetch" href="/assets/js/19.3d59a8e1.js"><link rel="prefetch" href="/assets/js/20.1573d510.js"><link rel="prefetch" href="/assets/js/21.f46234dd.js"><link rel="prefetch" href="/assets/js/22.6c16fd38.js"><link rel="prefetch" href="/assets/js/23.50a2a38a.js"><link rel="prefetch" href="/assets/js/24.8aff8273.js"><link rel="prefetch" href="/assets/js/25.35a7c496.js"><link rel="prefetch" href="/assets/js/26.af233874.js"><link rel="prefetch" href="/assets/js/27.a3a96a5a.js"><link rel="prefetch" href="/assets/js/28.a1d49602.js"><link rel="prefetch" href="/assets/js/29.174b7d7d.js"><link rel="prefetch" href="/assets/js/3.6038f64c.js"><link rel="prefetch" href="/assets/js/30.a4115d32.js"><link rel="prefetch" href="/assets/js/31.1522875a.js"><link rel="prefetch" href="/assets/js/32.35da527d.js"><link rel="prefetch" href="/assets/js/33.814d63e8.js"><link rel="prefetch" href="/assets/js/34.615b49c1.js"><link rel="prefetch" href="/assets/js/35.856ab789.js"><link rel="prefetch" href="/assets/js/36.2987bc62.js"><link rel="prefetch" href="/assets/js/37.084d12aa.js"><link rel="prefetch" href="/assets/js/38.088f3091.js"><link rel="prefetch" href="/assets/js/39.4ea066d5.js"><link rel="prefetch" href="/assets/js/4.c610d016.js"><link rel="prefetch" href="/assets/js/40.97850ba9.js"><link rel="prefetch" href="/assets/js/41.8b8ae086.js"><link rel="prefetch" href="/assets/js/42.8ae2cac3.js"><link rel="prefetch" href="/assets/js/43.f8a28187.js"><link rel="prefetch" href="/assets/js/44.5160f68a.js"><link rel="prefetch" href="/assets/js/45.6d4b7130.js"><link rel="prefetch" href="/assets/js/46.44693348.js"><link rel="prefetch" href="/assets/js/47.eb0ac18a.js"><link rel="prefetch" href="/assets/js/48.ce1c6335.js"><link rel="prefetch" href="/assets/js/49.7ec1b16a.js"><link rel="prefetch" href="/assets/js/5.216dfe20.js"><link rel="prefetch" href="/assets/js/50.1f503aa4.js"><link rel="prefetch" href="/assets/js/51.47971163.js"><link rel="prefetch" href="/assets/js/52.e5f681d7.js"><link rel="prefetch" href="/assets/js/53.df89fbb7.js"><link rel="prefetch" href="/assets/js/54.a140a8dd.js"><link rel="prefetch" href="/assets/js/55.5809711e.js"><link rel="prefetch" href="/assets/js/56.3a62759d.js"><link rel="prefetch" href="/assets/js/57.c9bd4339.js"><link rel="prefetch" href="/assets/js/58.acb475d1.js"><link rel="prefetch" href="/assets/js/59.61cf3322.js"><link rel="prefetch" href="/assets/js/6.73a8f323.js"><link rel="prefetch" href="/assets/js/60.aa39146e.js"><link rel="prefetch" href="/assets/js/61.f62972b8.js"><link rel="prefetch" href="/assets/js/62.79fc1ddc.js"><link rel="prefetch" href="/assets/js/63.808c750c.js"><link rel="prefetch" href="/assets/js/64.4e99e2e1.js"><link rel="prefetch" href="/assets/js/65.f112caec.js"><link rel="prefetch" href="/assets/js/66.422cc6c9.js"><link rel="prefetch" href="/assets/js/67.f504a803.js"><link rel="prefetch" href="/assets/js/68.f8e84a65.js"><link rel="prefetch" href="/assets/js/69.af07ae00.js"><link rel="prefetch" href="/assets/js/7.a6e60d89.js"><link rel="prefetch" href="/assets/js/70.9b212396.js"><link rel="prefetch" href="/assets/js/71.049b7d3e.js"><link rel="prefetch" href="/assets/js/72.b508f834.js"><link rel="prefetch" href="/assets/js/73.52a25a21.js"><link rel="prefetch" href="/assets/js/74.68de4c01.js"><link rel="prefetch" href="/assets/js/75.c0d8e99a.js"><link rel="prefetch" href="/assets/js/76.672b246e.js"><link rel="prefetch" href="/assets/js/77.36d886e3.js"><link rel="prefetch" href="/assets/js/78.079ebfd8.js"><link rel="prefetch" href="/assets/js/79.d3d3e8ea.js"><link rel="prefetch" href="/assets/js/8.a72c567f.js"><link rel="prefetch" href="/assets/js/80.c690c3d9.js"><link rel="prefetch" href="/assets/js/81.c012b7d5.js"><link rel="prefetch" href="/assets/js/82.47ffa460.js"><link rel="prefetch" href="/assets/js/83.2ba84114.js"><link rel="prefetch" href="/assets/js/84.dc0bf5a8.js"><link rel="prefetch" href="/assets/js/85.d968ae8b.js"><link rel="prefetch" href="/assets/js/86.91000a3b.js"><link rel="prefetch" href="/assets/js/87.6e885c71.js"><link rel="prefetch" href="/assets/js/88.99dd2b79.js"><link rel="prefetch" href="/assets/js/89.601c57ea.js"><link rel="prefetch" href="/assets/js/9.c59ba06b.js"><link rel="prefetch" href="/assets/js/90.89ee0da5.js"><link rel="prefetch" href="/assets/js/92.7a25d006.js"><link rel="prefetch" href="/assets/js/93.17f89281.js"><link rel="prefetch" href="/assets/js/94.0f6749b9.js"><link rel="prefetch" href="/assets/js/95.41ef6f4a.js"><link rel="prefetch" href="/assets/js/96.12427920.js"><link rel="prefetch" href="/assets/js/97.53036963.js"><link rel="prefetch" href="/assets/js/98.43d8f870.js"><link rel="prefetch" href="/assets/js/99.4ab32fce.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/heng.png" alt="英俊的大亨亨" class="logo"> <span class="site-name can-hide">英俊的大亨亨</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">js</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js-基础.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js-数组.html" class="nav-link">
  数组
</a></li><li class="dropdown-item"><!----> <a href="/js/js-异步.html" class="nav-link">
  异步
</a></li><li class="dropdown-item"><!----> <a href="/js/js-es6.html" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/js/js-v8引擎.html" class="nav-link">
  v8
</a></li><li class="dropdown-item"><!----> <a href="/手写代码/1.js基础.html" class="nav-link">
  手写
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/process.html" class="nav-link">
  
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/node.html" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="leetcode" class="dropdown-title"><span class="title">leetcode</span> <span class="arrow down"></span></button> <button type="button" aria-label="leetcode" class="mobile-dropdown-title"><span class="title">leetcode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/代码随想录/1.数组.html" class="nav-link">
  1.数组
</a></li><li class="dropdown-item"><!----> <a href="/代码随想录/10.动态规划/1.基础.html" class="nav-link">
  10.动态规划
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react源码/理念.html" class="nav-link">
  1.理念
</a></li><li class="dropdown-item"><!----> <a href="/react源码/3.render.html" class="nav-link">
  3.render
</a></li><li class="dropdown-item"><!----> <a href="/react源码/4.commit.html" class="nav-link">
  4.commit
</a></li><li class="dropdown-item"><!----> <a href="/react源码/5.状态更新.html" class="nav-link">
  5.状态更新
</a></li><li class="dropdown-item"><!----> <a href="/react源码/6.diff.html" class="nav-link">
  6.diff
</a></li><li class="dropdown-item"><!----> <a href="/react/7.实现hooks.html" class="nav-link">
  7.实现hooks
</a></li><li class="dropdown-item"><!----> <a href="/react/8.concurrentMode.html" class="nav-link">
  8.concurrentMode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/1.配置.html" class="nav-link">
  1.配置
</a></li><li class="dropdown-item"><!----> <a href="/webpack/2.loader.html" class="nav-link">
  2.loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/3.plugin.html" class="nav-link">
  3.plugin
</a></li><li class="dropdown-item"><!----> <a href="/webpack/4.模块化原理.html" class="nav-link">
  4.模块化原理
</a></li><li class="dropdown-item"><!----> <a href="/webpack/5.babel.html" class="nav-link">
  5.babel
</a></li><li class="dropdown-item"><!----> <a href="/webpack/6.HMR.html" class="nav-link">
  6.HMR
</a></li><li class="dropdown-item"><!----> <a href="/webpack/7.环境分离.html" class="nav-link">
  7.环境分离
</a></li><li class="dropdown-item"><!----> <a href="/webpack/8.tree_shaking.html" class="nav-link">
  8.tree_shaking
</a></li><li class="dropdown-item"><!----> <a href="/webpack/9,源码.html" class="nav-link">
  9.源码
</a></li><li class="dropdown-item"><!----> <a href="/webpack/11.自定义loader.html" class="nav-link">
  11.自定义loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/12.自定义plugin.html" class="nav-link">
  12.自定义plugin
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/设计模式/创建型.html" class="nav-link">
  创建型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  结构型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/行为型.html" class="nav-link">
  行为型
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">angular</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">angular</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">健身</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">健身</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><a href="/me.html" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">js</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js-基础.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js-数组.html" class="nav-link">
  数组
</a></li><li class="dropdown-item"><!----> <a href="/js/js-异步.html" class="nav-link">
  异步
</a></li><li class="dropdown-item"><!----> <a href="/js/js-es6.html" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/js/js-v8引擎.html" class="nav-link">
  v8
</a></li><li class="dropdown-item"><!----> <a href="/手写代码/1.js基础.html" class="nav-link">
  手写
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/process.html" class="nav-link">
  
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/node.html" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="leetcode" class="dropdown-title"><span class="title">leetcode</span> <span class="arrow down"></span></button> <button type="button" aria-label="leetcode" class="mobile-dropdown-title"><span class="title">leetcode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/代码随想录/1.数组.html" class="nav-link">
  1.数组
</a></li><li class="dropdown-item"><!----> <a href="/代码随想录/10.动态规划/1.基础.html" class="nav-link">
  10.动态规划
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react源码/理念.html" class="nav-link">
  1.理念
</a></li><li class="dropdown-item"><!----> <a href="/react源码/3.render.html" class="nav-link">
  3.render
</a></li><li class="dropdown-item"><!----> <a href="/react源码/4.commit.html" class="nav-link">
  4.commit
</a></li><li class="dropdown-item"><!----> <a href="/react源码/5.状态更新.html" class="nav-link">
  5.状态更新
</a></li><li class="dropdown-item"><!----> <a href="/react源码/6.diff.html" class="nav-link">
  6.diff
</a></li><li class="dropdown-item"><!----> <a href="/react/7.实现hooks.html" class="nav-link">
  7.实现hooks
</a></li><li class="dropdown-item"><!----> <a href="/react/8.concurrentMode.html" class="nav-link">
  8.concurrentMode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/1.配置.html" class="nav-link">
  1.配置
</a></li><li class="dropdown-item"><!----> <a href="/webpack/2.loader.html" class="nav-link">
  2.loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/3.plugin.html" class="nav-link">
  3.plugin
</a></li><li class="dropdown-item"><!----> <a href="/webpack/4.模块化原理.html" class="nav-link">
  4.模块化原理
</a></li><li class="dropdown-item"><!----> <a href="/webpack/5.babel.html" class="nav-link">
  5.babel
</a></li><li class="dropdown-item"><!----> <a href="/webpack/6.HMR.html" class="nav-link">
  6.HMR
</a></li><li class="dropdown-item"><!----> <a href="/webpack/7.环境分离.html" class="nav-link">
  7.环境分离
</a></li><li class="dropdown-item"><!----> <a href="/webpack/8.tree_shaking.html" class="nav-link">
  8.tree_shaking
</a></li><li class="dropdown-item"><!----> <a href="/webpack/9,源码.html" class="nav-link">
  9.源码
</a></li><li class="dropdown-item"><!----> <a href="/webpack/11.自定义loader.html" class="nav-link">
  11.自定义loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/12.自定义plugin.html" class="nav-link">
  12.自定义plugin
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/设计模式/创建型.html" class="nav-link">
  创建型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  结构型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/行为型.html" class="nav-link">
  行为型
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">angular</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">angular</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">健身</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">健身</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><a href="/me.html" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webpack/1.配置.html" class="sidebar-link">核心概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/1.配置.html#依赖图-dependency-graph" class="sidebar-link">依赖图(dependency graph)</a></li><li class="sidebar-sub-header"><a href="/webpack/1.配置.html#target" class="sidebar-link">target</a></li></ul></li><li><a href="/webpack/11.自定义loader.html" class="sidebar-link">/webpack/11.自定义loader.html</a></li><li><a href="/webpack/12.自定义plugin.html" class="sidebar-link">/webpack/12.自定义plugin.html</a></li><li><a href="/webpack/2.loader.html" class="sidebar-link">loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/2.loader.html#loader" class="sidebar-link">loader</a></li><li class="sidebar-sub-header"><a href="/webpack/2.loader.html#browserlist" class="sidebar-link">browserlist</a></li></ul></li><li><a href="/webpack/3.plugin.html" class="sidebar-link">插件plugin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/3.plugin.html#" class="sidebar-link"></a></li></ul></li><li><a href="/webpack/4.模块化原理.html" class="sidebar-link">/webpack/4.模块化原理.html</a></li><li><a href="/webpack/5.babel.html" class="sidebar-link">Babel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/5.babel.html#基础" class="sidebar-link">基础</a></li><li class="sidebar-sub-header"><a href="/webpack/5.babel.html#babel-loader" class="sidebar-link">babel-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/5.babel.html#配置babel-config-js" class="sidebar-link">配置babel.config.js</a></li><li class="sidebar-sub-header"><a href="/webpack/5.babel.html#typescript的编译" class="sidebar-link">TypeScript的编译</a></li><li class="sidebar-sub-header"><a href="/webpack/5.babel.html#eslint" class="sidebar-link">ESLint</a></li></ul></li><li><a href="/webpack/6.HMR.html" class="sidebar-link">HMR</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/6.HMR.html#publicpath" class="sidebar-link">publicPath</a></li><li class="sidebar-sub-header"><a href="/webpack/6.HMR.html#proxy" class="sidebar-link">Proxy</a></li><li class="sidebar-sub-header"><a href="/webpack/6.HMR.html#resolve" class="sidebar-link">resolve</a></li></ul></li><li><a href="/webpack/7.环境分离和代码抽取.html" class="sidebar-link">代码分离</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/7.环境分离和代码抽取.html#代码分离" class="sidebar-link">代码分离</a></li></ul></li><li><a href="/webpack/8.tree_shaking.html" class="sidebar-link">/webpack/8.tree_shaking.html</a></li><li><a href="/webpack/9.webpack源码.html" class="sidebar-link">/webpack/9.webpack源码.html</a></li><li><a href="/webpack/webpack.html" aria-current="page" class="active sidebar-link">/webpack/webpack.html</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack.html#sourcemap" class="sidebar-link">SourceMap</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#入口起点-entry-points" class="sidebar-link">入口起点(entry points)</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#输出-output" class="sidebar-link">输出(output)</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#配置-configuration" class="sidebar-link">配置(Configuration)</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#模块-modules" class="sidebar-link">模块(Modules)</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#模块解析-modules-resolutions" class="sidebar-link">模块解析(Modules Resolutions)</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#module-federation" class="sidebar-link">Module Federation</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#manifest" class="sidebar-link">manifest</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#模块热替换-hmr" class="sidebar-link">模块热替换 HMR</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#为什么选择webpack" class="sidebar-link">为什么选择webpack</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#内部原理" class="sidebar-link">内部原理</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#webpack基础配置" class="sidebar-link">webpack基础配置</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#webpack打包文件解析" class="sidebar-link">webpack打包文件解析</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack.html#html插件" class="sidebar-link">html插件</a></li></ul></li><li><a href="/webpack/webpack面试题.html" class="sidebar-link">问题一览</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack面试题.html#问题解答" class="sidebar-link">问题解答</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>npx = npm run xxx</p> <h4 id="串行构建流程"><a href="#串行构建流程" class="header-anchor">#</a> 串行构建流程</h4> <p>读配置参数、初始化编译对象，加载插件，开始编译、确定入口文件、编译模块，递归调用Loader、输出资源、输出文件</p> <p><strong>初始化参数</strong>：从配置文件和命令读取参数</p> <p><strong>开始编译</strong>：用得到的参数初始化 Compiler 对象，加载插件，执行对象的 run 方法开始编译；</p> <p><strong>确定入口</strong>：根据配置中的 entry 找出所有的入口文件；</p> <p><strong>编译模块</strong>：从入口文件出发，调用Loader 对模块进行翻译，直到所有入口依赖的文件都经过了本步骤的处理；</p> <p><strong>完成模块编译</strong>：得到每个模块被翻译后的最终内容以及依赖关系；</p> <p><strong>输出资源</strong>：根据入口和模块的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成单独的文件加入到输出列表</p> <p><strong>输出完成</strong>：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统。</p> <p>在以上过程中，Webpack 广播出事件，插件在监听到感兴趣的事件后会执行逻辑，改变 Webpack 的运行结果。</p> <h3 id="入口entry"><a href="#入口entry" class="header-anchor">#</a> 入口entry</h3> <ul><li>进入entry后，webpack会找出与entry依赖的模块和库；</li></ul> <h3 id="输出output"><a href="#输出output" class="header-anchor">#</a> 输出output</h3> <ul><li>定义输出bundle的位置和名称</li> <li>默认值是 ./dist/main.js，其他文件在./dist</li> <li>在<strong>webpack.config.js</strong>自定义output</li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'xxx'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="sourcemap"><a href="#sourcemap" class="header-anchor">#</a> SourceMap</h2> <p>devtool：none，false，evel都不会生成sourceMap</p> <p>sourceMap：从已转换的代码，映射到原始的源文件，方便调试</p> <h3 id="模式-mode"><a href="#模式-mode" class="header-anchor">#</a> 模式(mode)</h3> <ul><li>development, production（默认） 或 none</li> <li>mode可以启用 webpack 内置在相应环境下的优化</li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="浏览器兼容性-browser-compatibility"><a href="#浏览器兼容性-browser-compatibility" class="header-anchor">#</a> 浏览器兼容性(browser compatibility)</h3> <ul><li>webpack的import和require.ensure需要Promise</li> <li>旧浏览器需要提前加载polyfill</li></ul> <h3 id="环境-environment"><a href="#环境-environment" class="header-anchor">#</a> 环境(environment)</h3> <p>webpack 5 运行于 Node.js v10.13.0+ 的版本</p> <h2 id="入口起点-entry-points"><a href="#入口起点-entry-points" class="header-anchor">#</a> 入口起点(entry points)</h2> <h3 id="单个入口"><a href="#单个入口" class="header-anchor">#</a> 单个入口</h3> <ul><li>可以传入文件路径或文件路径数组给entry属性</li> <li>传入数组则创建multi-main entry，适用于一次注入多个依赖文件，将依赖关系绘制在一个chunk中的情景</li> <li>单入口可以快速配置webpack，但灵活性不大</li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    main<span class="token operator">:</span> <span class="token string">'./path/to/my/entry/file.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 或</span>
  entry<span class="token operator">:</span> <span class="token punctuation">[</span> 
  <span class="token string">'./src/file_1.js'</span><span class="token punctuation">,</span>
  <span class="token string">'./src/file_2.js'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="对象语法"><a href="#对象语法" class="header-anchor">#</a> 对象语法</h3> <p>module.exports = {
entry: {
app: './src/app.js',
adminApp: './src/adminApp.js'
}
};</p> <ul><li>定义入口的最可扩展的方式</li> <li>配置可拓展指的是可以重复使用，可以组合配置；将关注点从environment, build target, runtime中分离，并用工具进行合并</li> <li>通过插件生成入口时，可以传入{}</li></ul> <h4 id="描述入口的对象"><a href="#描述入口的对象" class="header-anchor">#</a> 描述入口的对象</h4> <p>dependOn：当前入口依赖的入口，必须先被加载
filename：输出文件名
import：加载模块
library
runtime：运行时chunk名，未设置将使用入口作为运行时</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    a2<span class="token operator">:</span> <span class="token string">'dependingfile.js'</span><span class="token punctuation">,</span>
    b2<span class="token operator">:</span> <span class="token punctuation">{</span>
      dependOn<span class="token operator">:</span> <span class="token string">'a2'</span><span class="token punctuation">,</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">'./src/app.js'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>dependOn和runtime不在同一入口同时使用，否则报错
runtime不能指向已存在的入口名，否则报错
dependOn不能循环引用，否则报错</p> <h3 id="常见场景"><a href="#常见场景" class="header-anchor">#</a> 常见场景</h3> <h4 id="分离app和vendor-第三方库-入口"><a href="#分离app和vendor-第三方库-入口" class="header-anchor">#</a> 分离app和vendor(第三方库)入口</h4> <p>配置两个单独的入口，这样就可以在vendor.js存储未修改的library或文件(例如Bootstrap或jQuery，image)，然后打包成chunk，内容hash不变，浏览器可以独立缓存，减少加载时间</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    main<span class="token operator">:</span> <span class="token string">'app.js'</span>
    vendor<span class="token operator">:</span> <span class="token string">'vendor.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].[contenthash].bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// webpack.dev.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>w4之前vendor作为单独入口添加到entry，编译成单独文件，w4使用optimization.splitChunks将vendor和app分开，并为vendor创建单独文件，而不为vendor创建entry</li></ul> <h4 id="多页面应用"><a href="#多页面应用" class="header-anchor">#</a> 多页面应用</h4> <ul><li>多页面应用中，server会拉取新的html文件，页面重新加载并下载资源。</li> <li>通过这个机会可以使用optimization.splitChunks为页面共享的应用代码创建bundle</li> <li>多页面应用能复用多个入口之间的代码和模块</li></ul> <h2 id="输出-output"><a href="#输出-output" class="header-anchor">#</a> 输出(output)</h2> <p>最低要求：设置为对象，文件名配置为output.filename</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 将一个单独的 bundle.js 文件输出到 dist 目录中</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="多个入口起点"><a href="#多个入口起点" class="header-anchor">#</a> 多个入口起点</h3> <p>如果创建出多个chunk，例如多个入口或使用CommonsChunkPlugin插件，需要使用占位符确保文件名称唯一</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
    search<span class="token operator">:</span> <span class="token string">'./src/search.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/dist'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 写入到硬盘：./dist/app.js, ./dist/search.js</span>
</code></pre></div><h3 id="进阶"><a href="#进阶" class="header-anchor">#</a> 进阶</h3> <p>对资源使用 CDN 和 hash 的复杂示例：
config.js</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/home/proj/cdn/assets/[fullhash]'</span><span class="token punctuation">,</span>
    publicPath<span class="token operator">:</span> <span class="token string">'https://cdn.example.com/assets/[fullhash]/'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>如果编译时不知道文件的publicPath，可以留空，运行时通过入口的__webpack_public_path__配置</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>__webpack_public_path__ <span class="token operator">=</span> myRuntimePublicPath<span class="token punctuation">;</span>
<span class="token comment">// 应用程序入口的其余部分</span>
</code></pre></div><h2 id="配置-configuration"><a href="#配置-configuration" class="header-anchor">#</a> 配置(Configuration)</h2> <ul><li>webpack文件内导出了配置对象，webpack根据对象属性进行处理</li> <li>webpack遵循commonJS规范
<ul><li>可以通过require引入文件，使用npm工具函数</li> <li>通过js控制流表达式如 ?:</li> <li>对value进行变量赋值</li> <li>编写执行函数生成配置</li></ul></li></ul> <h3 id="基本配置"><a href="#基本配置" class="header-anchor">#</a> 基本配置</h3> <div class="language-js extra-class"><pre class="language-js"><code>webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js

<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./foo.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'foo.bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="多个target"><a href="#多个target" class="header-anchor">#</a> 多个target</h3> <ul><li>除了可以将单个配置导出为 object，function 或 Promise 以外，还可以将其导出为多个配置</li></ul> <h3 id="使用其他配置语言"><a href="#使用其他配置语言" class="header-anchor">#</a> 使用其他配置语言</h3> <ul><li>webpack 支持由多种编程和数据语言编写的配置文件</li></ul> <h2 id="模块-modules"><a href="#模块-modules" class="header-anchor">#</a> 模块(Modules)</h2> <p>chunk即为模块</p> <h3 id="webpack模块"><a href="#webpack模块" class="header-anchor">#</a> webpack模块</h3> <h3 id="支持的模块类型"><a href="#支持的模块类型" class="header-anchor">#</a> 支持的模块类型</h3> <p>es模块
commonJS模块
AMD模块
Assets模块
WebAssembly模块</p> <ul><li>通过loader使webpack支持多语言和预处理器语法的模块，loader描述了如何处理非原生模块，并把依赖引入bundle</li></ul> <h2 id="模块解析-modules-resolutions"><a href="#模块解析-modules-resolutions" class="header-anchor">#</a> 模块解析(Modules Resolutions)</h2> <p>resolver是寻找模块绝对路径的库，模块可以作为另一个模块的依赖被引入
打包模块时，webpack使用enhanced-resolve解析路径</p> <h3 id="解析规则"><a href="#解析规则" class="header-anchor">#</a> 解析规则</h3> <ul><li>绝对路径：不做进一步解析</li> <li>相对路径：相对路径会拼接上下文路径</li> <li>模块路径：resolve.modules 指定目录检索模块，具体配置参照resolve.alias
<ul><li>如果 package 包含 package.json，那么 resolve.exportsFields 指定的字段会被依次查找</li> <li>package.json 的第一个字段会确定 package 中可用的 export</li></ul></li> <li>resolver 会检查路径是指向文件还是文件夹
<ul><li>路径指向文件：
<ul><li>如果文件有扩展名，则直接将文件打包。</li> <li>否则使用 resolve.extensions 选项作为文件扩展名来解析，此选项会告诉解析器在解析中能接受那些扩展名（例如 .js，.jsx）</li></ul></li> <li>路径指向文件夹，则寻找具有正确扩展名的文件：
<ul><li>如果文件夹包含 package.json ，则根据 resolve.mainFields的字段顺序查找，并根据 package.json 中的符合配置要求的第一个字段来确定文件路径。</li> <li>如果不存在 package.json 或 resolve.mainFields 没有返回有效路径，则根据 resolve.mainFiles 指定的文件名顺序查找，看是否能在 import/require 的目录下匹配到一个存在的文件名</li> <li>然后使用 resolve.extensions ，以类似的方式解析文件扩展名。</li> <li>webpack 会根据构建目标，为这些选项提供合理的默认配置</li></ul></li></ul></li></ul> <h3 id="解析loader"><a href="#解析loader" class="header-anchor">#</a> 解析loader</h3> <p>loader 的解析规则也遵循特定的规范。但是 resolveLoader 配置项可以为 loader 设置独立的解析规则</p> <h3 id="缓存"><a href="#缓存" class="header-anchor">#</a> 缓存</h3> <ul><li>每次文件系统访问文件都会被缓存，以便于更快触发对同一文件的多个并行或串行请求。</li> <li>在 watch 模式 下，只有修改过的文件会被从缓存中移出。如果关闭 watch 模式，则会在每次编译前清理缓存</li></ul> <h2 id="module-federation"><a href="#module-federation" class="header-anchor">#</a> Module Federation</h2> <h3 id="动机"><a href="#动机" class="header-anchor">#</a> 动机</h3> <p>多个独立的构建组成一个应用，独立的构建不存在依赖关系，可以单独开发部署，称为微前端</p> <h3 id="底层概念"><a href="#底层概念" class="header-anchor">#</a> 底层概念</h3> <ul><li>模块分为本地模块和远程模块，远程模块不属于当前构建，并在运行时从容器中加载</li> <li>加载远程模块是异步操作，被放置在远程模块和入口之间的下一个chunk的加载操作中</li> <li>chunk的加载操作通过import调用，也支持require.ensure或require()的旧语法</li> <li>容器由入口创建，入口暴露了对特定模块的异步访问，暴露的访问分为两个步骤：加载异步模块，执行同步模块
<ul><li>加载异步模块在chunk加载期间完成，执行同步模块在其他模块的交错执行期间完成</li> <li>因此，执行顺序不受模块在本地和远程之间转换的影响</li></ul></li> <li>容器可以嵌套使用，之间可以循环依赖</li></ul> <h4 id="重载-overriding"><a href="#重载-overriding" class="header-anchor">#</a> 重载 overriding</h4> <ul><li>容器将本地模块标记为“可重载”，容器的使用者执行重载（提供替换模块）</li> <li>容器将可重载模块放入一个chunk中，当使用者重写了模块，容器就不再下载对应的可重载模块</li> <li>替换模块的提供者只提供异步加载函数，容器需要替换模块时才去加载。如果容器不请求则不下载。</li> <li>name用于标识容器中可重载模块，嵌套使用时，相同name的模块将被自动覆盖</li> <li>重载的提供的步骤类似于容器暴露模块：加载异步和执行同步</li> <li>必须在容器模块加载前提供重载，初始chunk中只能被不使用Promise的同步模块重载，一旦执行就不可再重载</li></ul> <h3 id="高级概念"><a href="#高级概念" class="header-anchor">#</a> 高级概念</h3> <ul><li>每个构建是一个容器，也可以将其他构建作为容器。所以构建可以通过从容器中加载模块来访问暴露的模块</li> <li>共享模块指的是可重写、可作为向嵌套容器提供重写的模块。通常指向构建中的相同模块。</li> <li>packageName允许通过设置包名来查找版本，自动推断模块请求。</li></ul> <h3 id="构建块-building-blocks"><a href="#构建块-building-blocks" class="header-anchor">#</a> 构建块 (Building blocks)</h3> <ul><li>OverridablesPlugin (底层 API)
<ul><li>使特定模块“可重载”。一个本地 API ( __ webpack_override __ ) 允许提供重载。</li> <li>webpack.config.js</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> OverridablesPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/container/OverridablesPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">OverridablesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 通过 OverridablesPlugin 定义一个可重载的模块</span>
        test1<span class="token operator">:</span> <span class="token string">'./src/test1.js'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// src/index.js</span>
<span class="token function">__webpack_override__</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 这里我们重写 test1 模块</span>
  <span class="token function-variable function">test1</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'I will override test1 module under src'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>ContainerPlugin (底层 API)</p> <ul><li>该插件使用指定的公开模块来创建一个额外的容器入口。</li> <li>它还会在内部使用 OverridablesPlugin，并向容器的使用者暴露 override API。</li></ul></li> <li><p>ContainerReferencePlugin (底层 API)</p> <ul><li>该插件将特定的引用添加到作为外部资源（externals）的容器中，并允许从容器中导入远程模块。</li> <li>它还会调用容器的 override API 来为它们提供重载。</li> <li>本地的重载（当构建也是容器时，通过 <strong>webpack_override</strong> 或 override API）和指定的重载被提供给所有引用的容器。</li></ul></li> <li><p>ModuleFederationPlugin （高级 API）</p> <ul><li>该插件组合了 ContainerPlugin 和 ContainerReferencePlugin。</li> <li>重载（overrides）和可重载（overridables）被合并到指定共享模块的单个列表中</li></ul></li></ul> <h3 id="概念目标"><a href="#概念目标" class="header-anchor">#</a> 概念目标</h3> <ul><li>既可以暴露，又可以使用 webpack 支持的任何模块类型</li> <li>代码块加载应该并行加载所需的所有内容 (web到服务器的单次往返)</li> <li>从使用者到容器的控制
重写模块是一种单向操作
同级容器不能重写彼此的模块</li> <li>概念适用于独立于环境
可用于 web、Node.js</li> <li>共享中的相对和绝对请求
<ul><li>会一直提供，即使不使用</li> <li>会将相对路径解析到 config.context</li> <li>默认不会使用 requiredVersion</li></ul></li> <li>共享中的模块请求
<ul><li>只在使用时提供</li> <li>会匹配构建中所有使用的相等模块请求</li> <li>将提供所有匹配模块</li> <li>将从图中这个位置的 package.json 提取 requiredVersion</li> <li>当你有嵌套的 node_modules 时，可以提供和使用多个不同的版本</li></ul></li> <li>共享中尾部带有 / 的模块请求将匹配所有具有前缀的模块请求</li></ul> <h3 id="用例"><a href="#用例" class="header-anchor">#</a> 用例</h3> <h3 id="动态远程容器"><a href="#动态远程容器" class="header-anchor">#</a> 动态远程容器</h3> <p>该容器接口支持 get 和 init 方法。 init 是兼容 async 的方法，只含有一个参数：共享作用域对象(shared scope object)。此对象在远程容器中用作共享作用域，并由 host 提供的模块填充。 可以利用它在运行时动态地将远程容器连接到 host 容器。</p> <p>init.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 初始化共享作用域（shared scope）用提供的已知此构建和所有远程的模块填充它</span>
  <span class="token keyword">await</span> <span class="token function">__webpack_init_sharing__</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> container <span class="token operator">=</span> window<span class="token punctuation">.</span>someContainer<span class="token punctuation">;</span> <span class="token comment">// 或从其他地方获取容器</span>
  <span class="token comment">// 初始化容器 它可能提供共享模块</span>
  <span class="token keyword">await</span> container<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>__webpack_share_scopes__<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword">await</span> container<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>容器尝试提供共享模块，如果共享模块已被使用，则会发出警告，并忽略所提供的共享模块。容器仍能将其作为降级模块。</p> <p>你可以通过动态加载的方式，提供一个共享模块的不同版本，从而实现 A/B 测试。</p> <p>Tip：在尝试动态连接远程容器之前，确保已加载容器。</p> <p>例子：init.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">loadComponent</span><span class="token punctuation">(</span><span class="token parameter">scope<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化共享作用域（shared scope）用提供的已知此构建和所有远程的模块填充它</span>
    <span class="token keyword">await</span> <span class="token function">__webpack_init_sharing__</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> container <span class="token operator">=</span> window<span class="token punctuation">[</span>scope<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 或从其他地方获取容器</span>
    <span class="token comment">// 初始化容器 它可能提供共享模块</span>
    <span class="token keyword">await</span> container<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>__webpack_share_scopes__<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">[</span>scope<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> Module <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Module<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">loadComponent</span><span class="token punctuation">(</span><span class="token string">'abtests'</span><span class="token punctuation">,</span> <span class="token string">'test123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="故障排除"><a href="#故障排除" class="header-anchor">#</a> 故障排除</h3> <h2 id="manifest"><a href="#manifest" class="header-anchor">#</a> manifest</h2> <h2 id="模块热替换-hmr"><a href="#模块热替换-hmr" class="header-anchor">#</a> 模块热替换 HMR</h2> <p>概念：应用程序运行过程中，替换、添加或删除模块，而无需重新加载整个页面
表现方式：</p> <ul><li>保留在完全重新加载页面期间丢失的应用程序状态</li> <li>只更新变更内容</li> <li>在源代码 CSS/JS 修改时立刻在浏览器更新，相当于在浏览器 devtools 直接更改样式</li></ul> <h2 id="为什么选择webpack"><a href="#为什么选择webpack" class="header-anchor">#</a> 为什么选择webpack</h2> <h2 id="内部原理"><a href="#内部原理" class="header-anchor">#</a> 内部原理</h2> <h1 id="webpack实战"><a href="#webpack实战" class="header-anchor">#</a> webpack实战</h1> <h2 id="webpack基础配置"><a href="#webpack基础配置" class="header-anchor">#</a> webpack基础配置</h2> <p>yarn add webpack
yarn add webpack-cli -D</p> <h2 id="webpack打包文件解析"><a href="#webpack打包文件解析" class="header-anchor">#</a> webpack打包文件解析</h2> <ul><li>npx webpack</li> <li>自定义配置文件：<code>npx webpack --config webpack.config.my.js</code></li> <li>自定义npx命令
<ul><li>package.json中定义<code>scripts: {&quot;build&quot;: &quot;webpack --config config.js&quot;}</code></li> <li><code>npm run build</code></li> <li>或 package.json中定义<code>scripts: {&quot;build&quot;: &quot;webpack&quot;}</code></li> <li><code>npm run build -- -- config config.js</code></li></ul></li></ul> <h2 id="html插件"><a href="#html插件" class="header-anchor">#</a> html插件</h2> <h3 id="webpack-dev-server"><a href="#webpack-dev-server" class="header-anchor">#</a> webpack-dev-server</h3> <ul><li><p>webpack官方提供的小型Express服务器，为webpack打包生成的资源文件提供web服务。</p></li> <li><p>webpack-dev-server 主要提供两个功能：</p> <ul><li>1.为静态文件提供web服务</li> <li>2.自动刷新和热替换(HMR)</li> <li>自动刷新指当修改代码时webpack会自动编译更新内容</li> <li>热替换指运行时更新各种模块，即局部刷新</li></ul></li> <li><p>yarn add webpack-dev-server -D</p></li> <li><p>npx webpack-dev-server</p></li> <li><p>config.js</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    progress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    contentBase<span class="token operator">:</span> <span class="token string">'./build'</span> 
  <span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/21/2022, 9:01:05 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webpack/9.webpack源码.html" class="prev">
        /webpack/9.webpack源码.html
      </a></span> <span class="next"><a href="/webpack/webpack面试题.html">
        问题一览
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b51e4ccd.js" defer></script><script src="/assets/js/2.7229199a.js" defer></script><script src="/assets/js/91.854de449.js" defer></script>
  </body>
</html>
