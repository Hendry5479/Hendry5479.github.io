<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>react-router | 英俊的大亨亨</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="heng.png">
    <meta name="description" content="记录下有趣岁月的点点滴滴">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.b51e4ccd.js" as="script"><link rel="preload" href="/assets/js/2.7229199a.js" as="script"><link rel="preload" href="/assets/js/61.f62972b8.js" as="script"><link rel="prefetch" href="/assets/js/10.00f8a9d8.js"><link rel="prefetch" href="/assets/js/100.78dfd44a.js"><link rel="prefetch" href="/assets/js/101.cdae98a0.js"><link rel="prefetch" href="/assets/js/102.6a3dd9e0.js"><link rel="prefetch" href="/assets/js/103.cfed07a2.js"><link rel="prefetch" href="/assets/js/104.a16a4843.js"><link rel="prefetch" href="/assets/js/105.9cd1add0.js"><link rel="prefetch" href="/assets/js/106.546c1ad8.js"><link rel="prefetch" href="/assets/js/107.04b38bf9.js"><link rel="prefetch" href="/assets/js/108.31a22b61.js"><link rel="prefetch" href="/assets/js/109.1f2a1840.js"><link rel="prefetch" href="/assets/js/11.e2689dc6.js"><link rel="prefetch" href="/assets/js/110.9dc2f13b.js"><link rel="prefetch" href="/assets/js/111.35cf70f8.js"><link rel="prefetch" href="/assets/js/112.39a6579b.js"><link rel="prefetch" href="/assets/js/113.cbfc279d.js"><link rel="prefetch" href="/assets/js/114.878470a2.js"><link rel="prefetch" href="/assets/js/115.86dc4d8e.js"><link rel="prefetch" href="/assets/js/116.d2e05b2c.js"><link rel="prefetch" href="/assets/js/117.7525671d.js"><link rel="prefetch" href="/assets/js/118.a5c04c6d.js"><link rel="prefetch" href="/assets/js/119.613a81e1.js"><link rel="prefetch" href="/assets/js/12.0b7aaea4.js"><link rel="prefetch" href="/assets/js/120.ec6d3159.js"><link rel="prefetch" href="/assets/js/121.6705f783.js"><link rel="prefetch" href="/assets/js/122.7b3fe034.js"><link rel="prefetch" href="/assets/js/123.9336f454.js"><link rel="prefetch" href="/assets/js/124.dca9fc87.js"><link rel="prefetch" href="/assets/js/125.338aa4d8.js"><link rel="prefetch" href="/assets/js/126.a731a9eb.js"><link rel="prefetch" href="/assets/js/127.da74dd90.js"><link rel="prefetch" href="/assets/js/128.3d5e86f2.js"><link rel="prefetch" href="/assets/js/129.ee43b65c.js"><link rel="prefetch" href="/assets/js/13.31064a46.js"><link rel="prefetch" href="/assets/js/130.8a273d75.js"><link rel="prefetch" href="/assets/js/131.a89df4ac.js"><link rel="prefetch" href="/assets/js/132.0daac28c.js"><link rel="prefetch" href="/assets/js/133.b1f23c92.js"><link rel="prefetch" href="/assets/js/134.78621a9c.js"><link rel="prefetch" href="/assets/js/135.f0884a8b.js"><link rel="prefetch" href="/assets/js/136.45114430.js"><link rel="prefetch" href="/assets/js/137.eb295fce.js"><link rel="prefetch" href="/assets/js/138.cc7dc8d3.js"><link rel="prefetch" href="/assets/js/139.c9b1aad6.js"><link rel="prefetch" href="/assets/js/14.0be4ee49.js"><link rel="prefetch" href="/assets/js/15.685fab30.js"><link rel="prefetch" href="/assets/js/16.97f8b16a.js"><link rel="prefetch" href="/assets/js/17.9c7bebeb.js"><link rel="prefetch" href="/assets/js/18.965d9e47.js"><link rel="prefetch" href="/assets/js/19.3d59a8e1.js"><link rel="prefetch" href="/assets/js/20.1573d510.js"><link rel="prefetch" href="/assets/js/21.f46234dd.js"><link rel="prefetch" href="/assets/js/22.6c16fd38.js"><link rel="prefetch" href="/assets/js/23.50a2a38a.js"><link rel="prefetch" href="/assets/js/24.8aff8273.js"><link rel="prefetch" href="/assets/js/25.35a7c496.js"><link rel="prefetch" href="/assets/js/26.af233874.js"><link rel="prefetch" href="/assets/js/27.a3a96a5a.js"><link rel="prefetch" href="/assets/js/28.a1d49602.js"><link rel="prefetch" href="/assets/js/29.174b7d7d.js"><link rel="prefetch" href="/assets/js/3.6038f64c.js"><link rel="prefetch" href="/assets/js/30.a4115d32.js"><link rel="prefetch" href="/assets/js/31.1522875a.js"><link rel="prefetch" href="/assets/js/32.35da527d.js"><link rel="prefetch" href="/assets/js/33.814d63e8.js"><link rel="prefetch" href="/assets/js/34.615b49c1.js"><link rel="prefetch" href="/assets/js/35.856ab789.js"><link rel="prefetch" href="/assets/js/36.2987bc62.js"><link rel="prefetch" href="/assets/js/37.084d12aa.js"><link rel="prefetch" href="/assets/js/38.088f3091.js"><link rel="prefetch" href="/assets/js/39.4ea066d5.js"><link rel="prefetch" href="/assets/js/4.c610d016.js"><link rel="prefetch" href="/assets/js/40.97850ba9.js"><link rel="prefetch" href="/assets/js/41.8b8ae086.js"><link rel="prefetch" href="/assets/js/42.8ae2cac3.js"><link rel="prefetch" href="/assets/js/43.f8a28187.js"><link rel="prefetch" href="/assets/js/44.5160f68a.js"><link rel="prefetch" href="/assets/js/45.6d4b7130.js"><link rel="prefetch" href="/assets/js/46.44693348.js"><link rel="prefetch" href="/assets/js/47.eb0ac18a.js"><link rel="prefetch" href="/assets/js/48.ce1c6335.js"><link rel="prefetch" href="/assets/js/49.7ec1b16a.js"><link rel="prefetch" href="/assets/js/5.216dfe20.js"><link rel="prefetch" href="/assets/js/50.1f503aa4.js"><link rel="prefetch" href="/assets/js/51.47971163.js"><link rel="prefetch" href="/assets/js/52.e5f681d7.js"><link rel="prefetch" href="/assets/js/53.df89fbb7.js"><link rel="prefetch" href="/assets/js/54.a140a8dd.js"><link rel="prefetch" href="/assets/js/55.5809711e.js"><link rel="prefetch" href="/assets/js/56.3a62759d.js"><link rel="prefetch" href="/assets/js/57.c9bd4339.js"><link rel="prefetch" href="/assets/js/58.acb475d1.js"><link rel="prefetch" href="/assets/js/59.61cf3322.js"><link rel="prefetch" href="/assets/js/6.73a8f323.js"><link rel="prefetch" href="/assets/js/60.aa39146e.js"><link rel="prefetch" href="/assets/js/62.79fc1ddc.js"><link rel="prefetch" href="/assets/js/63.808c750c.js"><link rel="prefetch" href="/assets/js/64.4e99e2e1.js"><link rel="prefetch" href="/assets/js/65.f112caec.js"><link rel="prefetch" href="/assets/js/66.422cc6c9.js"><link rel="prefetch" href="/assets/js/67.f504a803.js"><link rel="prefetch" href="/assets/js/68.f8e84a65.js"><link rel="prefetch" href="/assets/js/69.af07ae00.js"><link rel="prefetch" href="/assets/js/7.a6e60d89.js"><link rel="prefetch" href="/assets/js/70.9b212396.js"><link rel="prefetch" href="/assets/js/71.049b7d3e.js"><link rel="prefetch" href="/assets/js/72.b508f834.js"><link rel="prefetch" href="/assets/js/73.52a25a21.js"><link rel="prefetch" href="/assets/js/74.68de4c01.js"><link rel="prefetch" href="/assets/js/75.c0d8e99a.js"><link rel="prefetch" href="/assets/js/76.672b246e.js"><link rel="prefetch" href="/assets/js/77.36d886e3.js"><link rel="prefetch" href="/assets/js/78.079ebfd8.js"><link rel="prefetch" href="/assets/js/79.d3d3e8ea.js"><link rel="prefetch" href="/assets/js/8.a72c567f.js"><link rel="prefetch" href="/assets/js/80.c690c3d9.js"><link rel="prefetch" href="/assets/js/81.c012b7d5.js"><link rel="prefetch" href="/assets/js/82.47ffa460.js"><link rel="prefetch" href="/assets/js/83.2ba84114.js"><link rel="prefetch" href="/assets/js/84.dc0bf5a8.js"><link rel="prefetch" href="/assets/js/85.d968ae8b.js"><link rel="prefetch" href="/assets/js/86.91000a3b.js"><link rel="prefetch" href="/assets/js/87.6e885c71.js"><link rel="prefetch" href="/assets/js/88.99dd2b79.js"><link rel="prefetch" href="/assets/js/89.601c57ea.js"><link rel="prefetch" href="/assets/js/9.c59ba06b.js"><link rel="prefetch" href="/assets/js/90.89ee0da5.js"><link rel="prefetch" href="/assets/js/91.854de449.js"><link rel="prefetch" href="/assets/js/92.7a25d006.js"><link rel="prefetch" href="/assets/js/93.17f89281.js"><link rel="prefetch" href="/assets/js/94.0f6749b9.js"><link rel="prefetch" href="/assets/js/95.41ef6f4a.js"><link rel="prefetch" href="/assets/js/96.12427920.js"><link rel="prefetch" href="/assets/js/97.53036963.js"><link rel="prefetch" href="/assets/js/98.43d8f870.js"><link rel="prefetch" href="/assets/js/99.4ab32fce.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/heng.png" alt="英俊的大亨亨" class="logo"> <span class="site-name can-hide">英俊的大亨亨</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">js</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js-基础.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js-数组.html" class="nav-link">
  数组
</a></li><li class="dropdown-item"><!----> <a href="/js/js-异步.html" class="nav-link">
  异步
</a></li><li class="dropdown-item"><!----> <a href="/js/js-es6.html" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/js/js-v8引擎.html" class="nav-link">
  v8
</a></li><li class="dropdown-item"><!----> <a href="/手写代码/1.js基础.html" class="nav-link">
  手写
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/process.html" class="nav-link">
  
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/node.html" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="leetcode" class="dropdown-title"><span class="title">leetcode</span> <span class="arrow down"></span></button> <button type="button" aria-label="leetcode" class="mobile-dropdown-title"><span class="title">leetcode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/代码随想录/1.数组.html" class="nav-link">
  1.数组
</a></li><li class="dropdown-item"><!----> <a href="/代码随想录/10.动态规划/1.基础.html" class="nav-link">
  10.动态规划
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react源码/理念.html" class="nav-link">
  1.理念
</a></li><li class="dropdown-item"><!----> <a href="/react源码/3.render.html" class="nav-link">
  3.render
</a></li><li class="dropdown-item"><!----> <a href="/react源码/4.commit.html" class="nav-link">
  4.commit
</a></li><li class="dropdown-item"><!----> <a href="/react源码/5.状态更新.html" class="nav-link">
  5.状态更新
</a></li><li class="dropdown-item"><!----> <a href="/react源码/6.diff.html" class="nav-link">
  6.diff
</a></li><li class="dropdown-item"><!----> <a href="/react/7.实现hooks.html" class="nav-link">
  7.实现hooks
</a></li><li class="dropdown-item"><!----> <a href="/react/8.concurrentMode.html" class="nav-link">
  8.concurrentMode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/1.配置.html" class="nav-link">
  1.配置
</a></li><li class="dropdown-item"><!----> <a href="/webpack/2.loader.html" class="nav-link">
  2.loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/3.plugin.html" class="nav-link">
  3.plugin
</a></li><li class="dropdown-item"><!----> <a href="/webpack/4.模块化原理.html" class="nav-link">
  4.模块化原理
</a></li><li class="dropdown-item"><!----> <a href="/webpack/5.babel.html" class="nav-link">
  5.babel
</a></li><li class="dropdown-item"><!----> <a href="/webpack/6.HMR.html" class="nav-link">
  6.HMR
</a></li><li class="dropdown-item"><!----> <a href="/webpack/7.环境分离.html" class="nav-link">
  7.环境分离
</a></li><li class="dropdown-item"><!----> <a href="/webpack/8.tree_shaking.html" class="nav-link">
  8.tree_shaking
</a></li><li class="dropdown-item"><!----> <a href="/webpack/9,源码.html" class="nav-link">
  9.源码
</a></li><li class="dropdown-item"><!----> <a href="/webpack/11.自定义loader.html" class="nav-link">
  11.自定义loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/12.自定义plugin.html" class="nav-link">
  12.自定义plugin
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/设计模式/创建型.html" class="nav-link">
  创建型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  结构型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/行为型.html" class="nav-link">
  行为型
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">angular</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">angular</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react%E8%BF%9B%E9%98%B6%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">健身</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">健身</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react%E8%BF%9B%E9%98%B6%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><a href="/me.html" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">js</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js-基础.html" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js-数组.html" class="nav-link">
  数组
</a></li><li class="dropdown-item"><!----> <a href="/js/js-异步.html" class="nav-link">
  异步
</a></li><li class="dropdown-item"><!----> <a href="/js/js-es6.html" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/js/js-v8引擎.html" class="nav-link">
  v8
</a></li><li class="dropdown-item"><!----> <a href="/手写代码/1.js基础.html" class="nav-link">
  手写
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/process.html" class="nav-link">
  
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/html.html" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/css.html" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/node.html" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/webpack.html" class="nav-link">
  小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="leetcode" class="dropdown-title"><span class="title">leetcode</span> <span class="arrow down"></span></button> <button type="button" aria-label="leetcode" class="mobile-dropdown-title"><span class="title">leetcode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/代码随想录/1.数组.html" class="nav-link">
  1.数组
</a></li><li class="dropdown-item"><!----> <a href="/代码随想录/10.动态规划/1.基础.html" class="nav-link">
  10.动态规划
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">react源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">react源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react源码/理念.html" class="nav-link">
  1.理念
</a></li><li class="dropdown-item"><!----> <a href="/react源码/3.render.html" class="nav-link">
  3.render
</a></li><li class="dropdown-item"><!----> <a href="/react源码/4.commit.html" class="nav-link">
  4.commit
</a></li><li class="dropdown-item"><!----> <a href="/react源码/5.状态更新.html" class="nav-link">
  5.状态更新
</a></li><li class="dropdown-item"><!----> <a href="/react源码/6.diff.html" class="nav-link">
  6.diff
</a></li><li class="dropdown-item"><!----> <a href="/react/7.实现hooks.html" class="nav-link">
  7.实现hooks
</a></li><li class="dropdown-item"><!----> <a href="/react/8.concurrentMode.html" class="nav-link">
  8.concurrentMode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/1.配置.html" class="nav-link">
  1.配置
</a></li><li class="dropdown-item"><!----> <a href="/webpack/2.loader.html" class="nav-link">
  2.loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/3.plugin.html" class="nav-link">
  3.plugin
</a></li><li class="dropdown-item"><!----> <a href="/webpack/4.模块化原理.html" class="nav-link">
  4.模块化原理
</a></li><li class="dropdown-item"><!----> <a href="/webpack/5.babel.html" class="nav-link">
  5.babel
</a></li><li class="dropdown-item"><!----> <a href="/webpack/6.HMR.html" class="nav-link">
  6.HMR
</a></li><li class="dropdown-item"><!----> <a href="/webpack/7.环境分离.html" class="nav-link">
  7.环境分离
</a></li><li class="dropdown-item"><!----> <a href="/webpack/8.tree_shaking.html" class="nav-link">
  8.tree_shaking
</a></li><li class="dropdown-item"><!----> <a href="/webpack/9,源码.html" class="nav-link">
  9.源码
</a></li><li class="dropdown-item"><!----> <a href="/webpack/11.自定义loader.html" class="nav-link">
  11.自定义loader
</a></li><li class="dropdown-item"><!----> <a href="/webpack/12.自定义plugin.html" class="nav-link">
  12.自定义plugin
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/设计模式/创建型.html" class="nav-link">
  创建型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  结构型
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/行为型.html" class="nav-link">
  行为型
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">angular</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">angular</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react%E8%BF%9B%E9%98%B6%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">健身</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">健身</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react%E8%BF%9B%E9%98%B6%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97/.html" class="nav-link">
  angular性能调优
</a></li><li class="dropdown-item"><!----> <a href="/设计模式/结构型.html" class="nav-link">
  angular源码理解
</a></li></ul></div></div><div class="nav-item"><a href="/me.html" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>react进阶实践指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/react/react进阶实践指南/fiber.html" class="sidebar-link">fiber保存的信息</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/react/react进阶实践指南/v18.html" class="sidebar-link">transition</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/v18.html#意义" class="sidebar-link">意义</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/v18.html#starttransition" class="sidebar-link">startTransition</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/v18.html#usetransition" class="sidebar-link">useTransition</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/v18.html#usedeferredvalue" class="sidebar-link">useDeferredValue</a></li></ul></li><li><a href="/react/react进阶实践指南/优化篇.html" class="sidebar-link">渲染控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/优化篇.html#渲染的理解" class="sidebar-link">渲染的理解</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/优化篇.html#控制render" class="sidebar-link">控制render</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/优化篇.html#对render的思考" class="sidebar-link">对render的思考</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/优化篇.html#二-懒加载和异步渲染" class="sidebar-link">二 懒加载和异步渲染</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/优化篇.html#三-渲染错误边界" class="sidebar-link">三 渲染错误边界</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/优化篇.html#四-从diff-children看key的合理使用" class="sidebar-link">四 从diff children看key的合理使用</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/优化篇.html#时间分片" class="sidebar-link">时间分片</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/优化篇.html#虚拟列表" class="sidebar-link">虚拟列表</a></li></ul></li><li><a href="/react/react进阶实践指南/原理篇.html" class="sidebar-link">事件原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#独特的事件处理" class="sidebar-link">独特的事件处理</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#事件合成" class="sidebar-link">事件合成</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#事件绑定" class="sidebar-link">事件绑定</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#事件触发" class="sidebar-link">事件触发</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#异步调度" class="sidebar-link">异步调度</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#异步调度原理" class="sidebar-link">异步调度原理</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#背景" class="sidebar-link">背景</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#二-fiber认识" class="sidebar-link">二 fiber认识</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#三-fiber更新机制" class="sidebar-link">三 fiber更新机制</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#四-两大阶段-render和commit" class="sidebar-link">四 两大阶段：render和commit</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#二-hooks与fiber-workinprogress" class="sidebar-link">二 hooks与fiber（workInProgress）</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#三-状态派发" class="sidebar-link">三 状态派发</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#四-处理副作用" class="sidebar-link">四 处理副作用</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#五-状态获取与状态缓存" class="sidebar-link">五 状态获取与状态缓存</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/原理篇.html#六-总结" class="sidebar-link">六 总结</a></li></ul></li><li><a href="/react/react进阶实践指南/原理篇2.html" class="sidebar-link">context原理</a></li><li><a href="/react/react进阶实践指南/基础篇.html" class="sidebar-link">jsx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#一、常用元素被react处理成什么" class="sidebar-link">一、常用元素被React处理成什么</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#二、可控性render" class="sidebar-link">二、可控性render</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#三、babel解析jsx" class="sidebar-link">三、Babel解析JSX</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#二、函数组件" class="sidebar-link">二、函数组件</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#三、5种组件通信方式" class="sidebar-link">三、5种组件通信方式</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#四、组件强化" class="sidebar-link">四、组件强化</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#一、类组件setstate" class="sidebar-link">一、类组件setState</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#二、函数组件的usestate" class="sidebar-link">二、函数组件的useState</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#一、监听props" class="sidebar-link">一、监听props</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#二、props-children模式" class="sidebar-link">二、props + children模式</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#三、操作props" class="sidebar-link">三、操作props</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#类组件生命周期" class="sidebar-link">类组件生命周期</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#各个生命周期能做些什么" class="sidebar-link">各个生命周期能做些什么</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#函数组件生命周期替代方案" class="sidebar-link">函数组件生命周期替代方案</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#ref的基本概念和使用" class="sidebar-link">ref的基本概念和使用</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#ref原理" class="sidebar-link">ref原理</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#基本使用" class="sidebar-link">基本使用</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#高阶组件类型" class="sidebar-link">高阶组件类型</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#高阶组件如何编写" class="sidebar-link">高阶组件如何编写</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#高阶组件注意事项" class="sidebar-link">高阶组件注意事项</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/基础篇.html#进阶实践-权限拦截" class="sidebar-link">进阶实践 权限拦截</a></li></ul></li><li><a href="/react/react进阶实践指南/实践篇.html" class="sidebar-link">实现mini-router</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/实践篇.html#二-设计思路" class="sidebar-link">二 设计思路</a></li></ul></li><li><a href="/react/react进阶实践指南/源码目录.html" class="sidebar-link">/react/react进阶实践指南/源码目录.html</a></li><li><a href="/react/react进阶实践指南/生态篇.html" class="active sidebar-link">react-router</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/生态篇.html#一-前言" class="sidebar-link">一 前言</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/生态篇.html#二-路由原理" class="sidebar-link">二 路由原理</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/生态篇.html#三-react-router-基本构成" class="sidebar-link">三 React-Router 基本构成</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/生态篇.html#四-路由使用指南" class="sidebar-link">四 路由使用指南</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/生态篇.html#五-实践一权限路由封装" class="sidebar-link">五 实践一权限路由封装</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/生态篇.html#一-前言-2" class="sidebar-link">一 前言</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/生态篇.html#二-react-redux用法" class="sidebar-link">二 React-Redux用法</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/生态篇.html#三-react-redux原理" class="sidebar-link">三 React-Redux原理</a></li><li class="sidebar-sub-header"><a href="/react/react进阶实践指南/生态篇.html#四-实现异步" class="sidebar-link">四 实现异步</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react-router"><a href="#react-router" class="header-anchor">#</a> react-router</h1> <h2 id="一-前言"><a href="#一-前言" class="header-anchor">#</a> 一 前言</h2> <h3 id="单页面应用"><a href="#单页面应用" class="header-anchor">#</a> 单页面应用</h3> <h2 id="二-路由原理"><a href="#二-路由原理" class="header-anchor">#</a> 二 路由原理</h2> <h3 id="_1-history-react-router-react-router-dom-三者关系"><a href="#_1-history-react-router-react-router-dom-三者关系" class="header-anchor">#</a> 1 history ,React-router , React-router-dom 三者关系</h3> <p>history：改变路由</p> <p>react-router：渲染视图，Router，Route，Switch，Redirect，</p> <p>react-router-dom：UI拓展，NavLink，Link，BrowserRouer，HashRouter</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ff05efcf1d04fefaa4c2b94d09827bd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt="three.jpg"></p> <h3 id="_2-两种路由主要方式"><a href="#_2-两种路由主要方式" class="header-anchor">#</a> 2 两种路由主要方式</h3> <p>History 库对于两种模式下的监听和处理方法不同</p> <h4 id="browserhistory模式"><a href="#browserhistory模式" class="header-anchor">#</a> BrowserHistory模式</h4> <p><strong>① 改变路由</strong></p> <p><strong><code>window.history.pushState</code></strong></p> <p>history.pushState(state,title,path)</p> <p>history.push 改变路由，本质上是调用 window.history.pushState</p> <p><strong><code>history.replaceState</code></strong></p> <p><strong>② 监听路由</strong> <strong><code>popstate</code></strong></p> <h4 id="hashhistory模式"><a href="#hashhistory模式" class="header-anchor">#</a> HashHistory模式</h4> <h3 id="_3-react路由原理"><a href="#_3-react路由原理" class="header-anchor">#</a> 3 React路由原理</h3> <h2 id="三-react-router-基本构成"><a href="#三-react-router-基本构成" class="header-anchor">#</a> 三 React-Router 基本构成</h2> <h3 id="_1-history-location-match"><a href="#_1-history-location-match" class="header-anchor">#</a> 1 history，location，match</h3> <ul><li><code>history 对象</code>：保存改变路由方法 push ，replace，和监听路由方法 listen 等。</li> <li><code>location 对象</code>：当前状态下的路由信息，包括 pathname ，state 等。</li> <li><code>match 对象</code>：证明当前路由的匹配信息的对象。存放当前路由path 等信息。</li></ul> <h3 id="_2-路由组件"><a href="#_2-路由组件" class="header-anchor">#</a> 2 路由组件</h3> <h4 id="_1router"><a href="#_1router" class="header-anchor">#</a> ①Router</h4> <p><strong>Router是整个应用路由的传递者和派发更新者</strong></p> <p>不会直接使用Router，而是使用react-router-dom的HashRouter</p> <p>Router作为传递更新路由的容器，而HashRouter是向容器注入了history对象</p> <p>确保应用根部有一个HashRouter容器即可</p> <h4 id="_2route"><a href="#_2route" class="header-anchor">#</a> ②Route</h4> <h4 id="_3switch"><a href="#_3switch" class="header-anchor">#</a> ③Switch</h4> <h4 id="_4redirect"><a href="#_4redirect" class="header-anchor">#</a> ④Redirect</h4> <h3 id="_3-从路由改变到页面跳转流程图"><a href="#_3-从路由改变到页面跳转流程图" class="header-anchor">#</a> 3 从路由改变到页面跳转流程图</h3> <h2 id="四-路由使用指南"><a href="#四-路由使用指南" class="header-anchor">#</a> 四 路由使用指南</h2> <h3 id="_1-路由状态获取"><a href="#_1-路由状态获取" class="header-anchor">#</a> 1 路由状态获取</h3> <h4 id="_1-路由组件-props"><a href="#_1-路由组件-props" class="header-anchor">#</a> ① 路由组件 props</h4> <h4 id="_2-withrouter"><a href="#_2-withrouter" class="header-anchor">#</a> ② withRouter</h4> <h4 id="_3-usehistory-和-uselocation"><a href="#_3-usehistory-和-uselocation" class="header-anchor">#</a> ③ useHistory 和 useLocation</h4> <h3 id="_2-路由带参数跳转"><a href="#_2-路由带参数跳转" class="header-anchor">#</a> 2 路由带参数跳转</h3> <h4 id="_1-路由跳转"><a href="#_1-路由跳转" class="header-anchor">#</a> ① 路由跳转</h4> <h4 id="_2-参数传递"><a href="#_2-参数传递" class="header-anchor">#</a> ② 参数传递</h4> <h4 id="_3-动态路径参数路由"><a href="#_3-动态路径参数路由" class="header-anchor">#</a> ③ 动态路径参数路由</h4> <h3 id="_3-嵌套路由"><a href="#_3-嵌套路由" class="header-anchor">#</a> 3 嵌套路由</h3> <h3 id="_4-路由拓展"><a href="#_4-路由拓展" class="header-anchor">#</a> 4 路由拓展</h3> <h2 id="五-实践一权限路由封装"><a href="#五-实践一权限路由封装" class="header-anchor">#</a> 五 实践一权限路由封装</h2> <h1 id="react-redux"><a href="#react-redux" class="header-anchor">#</a> react-redux</h1> <h2 id="一-前言-2"><a href="#一-前言-2" class="header-anchor">#</a> 一 前言</h2> <h3 id="_1-状态管理应用场景"><a href="#_1-状态管理应用场景" class="header-anchor">#</a> 1 状态管理应用场景</h3> <p><strong>① 组件之间共用数据，如何处理?</strong></p> <p>共享数据在初始化时请求一次，通过状态管理保存起来</p> <p><strong>② 复杂组件之间如何通信？</strong></p> <p>把传递的信息放在状态管理层，消费信息的组件连接状态管理层，再由状态管理层通知消费组件即可</p> <h3 id="_2-react-redux-redux-react三者关系"><a href="#_2-react-redux-redux-react三者关系" class="header-anchor">#</a> 2 React-Redux,Redux,React三者关系</h3> <p>react-redux是react和redux的桥梁，专注于如何向react注入redux的store，以及如何根据store改变，把消息派发到订阅组件</p> <h3 id="_3-温习-redux"><a href="#_3-温习-redux" class="header-anchor">#</a> 3 温习 Redux</h3> <h4 id="_1三大原则"><a href="#_1三大原则" class="header-anchor">#</a> ①三大原则</h4> <p>1 单向数据流</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d3775935f59d435fa6326dbcef90519e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt="redux.gif"></p> <p>2 state 只读，改变state必须触发一次action，通过action执行reducer</p> <p>3 纯函数执行：每个reducer都是纯函数，返回值作为新state，state改变触发store的subscribe</p> <h4 id="_2发布订阅思想"><a href="#_2发布订阅思想" class="header-anchor">#</a> ②发布订阅思想</h4> <p>改变state的方法dispatch，订阅store变化的subscribe</p> <h4 id="_3中间件思想"><a href="#_3中间件思想" class="header-anchor">#</a> ③中间件思想</h4> <p>使用中间件强化dispatch</p> <p>传统的dispatch不支持异步，为了支持异步dispatch，做中间件强化，产生react-thunk等</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>funcs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> funcs<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> g</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>funcs是中间件组成的数组，compose通过reducer方法，实现对中间件的便利执行，强化dispatch</p> <h4 id="_4核心api"><a href="#_4核心api" class="header-anchor">#</a> ④核心api</h4> <p><strong>createStore</strong></p> <p><code>const Store = createStore(rootReducer,initialState,middleware)</code></p> <p>redux的reducer，如果有多个需要用combineReducers</p> <p><strong>combineReducers</strong></p> <p>正常情况会有多个reducers</p> <p><strong>applyMiddleware</strong></p> <p><code>cosnt middleware = applyMiddleware(xx)</code></p> <p>支持多参数，每个参数都是中间件，每次触发action，中间件依次执行</p> <h4 id="_5-实战-redux基本用法"><a href="#_5-实战-redux基本用法" class="header-anchor">#</a> ⑤ 实战-redux基本用法</h4> <h5 id="编写reducer"><a href="#编写reducer" class="header-anchor">#</a> 编写reducer</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">numberReducer</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'add'</span><span class="token operator">:</span> <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">case</span> <span class="token string">'del'</span><span class="token operator">:</span> <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">infoReducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'set'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">.</span>payload<span class="token punctuation">}</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h5 id="注册中间件"><a href="#注册中间件" class="header-anchor">#</a> 注册中间件</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">logMiddlerware</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>type<span class="token punctuation">}</span> <span class="token operator">=</span> action
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="生成store"><a href="#生成store" class="header-anchor">#</a> 生成store</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> rootMiddleware <span class="token operator">=</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>logMiddleware<span class="token punctuation">)</span>
<span class="token keyword">const</span> rootReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> numberReducers<span class="token punctuation">,</span> info<span class="token operator">:</span> infoReducers<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> strore <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>rootReducer<span class="token punctuation">,</span> <span class="token punctuation">{</span>number<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> info<span class="token operator">:</span> <span class="token punctuation">{</span>xx<span class="token punctuation">}</span><span class="token punctuation">,</span> rootMiddleware<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="使用redux"><a href="#使用redux" class="header-anchor">#</a> 使用redux</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> changeState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>Store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> Store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">changeState</span><span class="token punctuation">(</span>Store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div <span class="token operator">&gt;</span> 
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>  <span class="token punctuation">{</span> state<span class="token punctuation">.</span>info<span class="token punctuation">.</span>name <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> state<span class="token punctuation">.</span>info<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">'what is your name'</span> <span class="token punctuation">}</span> <span class="token punctuation">,</span>
           <span class="token punctuation">{</span> state<span class="token punctuation">.</span>info<span class="token punctuation">.</span>mes <span class="token operator">?</span> state<span class="token punctuation">.</span>info<span class="token punctuation">.</span>mes  <span class="token operator">:</span> <span class="token string">' what do you say? '</span>  <span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
         《React进阶实践指南》 <span class="token punctuation">{</span> state<span class="token punctuation">.</span>number <span class="token punctuation">}</span> 👍 <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> Store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span><span class="token string">'ADD'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>点赞<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> Store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span><span class="token string">'SET'</span><span class="token punctuation">,</span>payload<span class="token operator">:</span><span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">'alien'</span> <span class="token punctuation">,</span> mes<span class="token operator">:</span><span class="token string">'let us learn React!'</span>  <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>修改标题<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="二-react-redux用法"><a href="#二-react-redux用法" class="header-anchor">#</a> 二 React-Redux用法</h2> <p>它主要功能体现在如下两个方面：</p> <ul><li>1 接受 Redux 的 Store，并把它合理分配到所需要的组件中。</li> <li>2 订阅 Store 中 state 的改变，促使消费对应的 state 的组件更新。</li></ul> <h3 id="_1-用法简介"><a href="#_1-用法简介" class="header-anchor">#</a> 1 用法简介</h3> <h4 id="provider"><a href="#provider" class="header-anchor">#</a> Provider</h4> <p>保存 redux 中的 store ，分配给所有需要 state 的子孙组件</p> <p>把 Provider 注册到根部组件中</p> <h4 id="connect"><a href="#connect" class="header-anchor">#</a> connect</h4> <p><code>functionconnect(mapStateToProps?, mapDispatchToProps?, mergeProps?, options?)</code></p> <p>被connect包装后的组件获得如下功能：</p> <ol><li>从props获取改变state的方法 Store.dispatch</li> <li>将state中的数据映射到props，子组件可以消费</li> <li>需要的state变化时，通知组件更新</li></ol> <p><strong>①mapStateToProps</strong></p> <p><code>const mapStateToProps = state =&gt; ({ number: state.number })</code></p> <p>state映射到props，当state改变时触发props改变，触发更新。</p> <p>没有该参数，则组件不订阅store的改变</p> <p><strong>②mapDispatchToProps</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">numberAdd</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'ADD'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">setInfo</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SET'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>将dispatch映射到props</p> <p>组件可以调用numberAdd，setInfo</p> <p><strong>③mergeProps</strong></p> <p><strong>④options</strong></p> <h3 id="_2-实践一-react-redux实现状态共享"><a href="#_2-实践一-react-redux实现状态共享" class="header-anchor">#</a> 2 实践一：React-Redux实现状态共享</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    Store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span><span class="token string">'ADD'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    Store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span><span class="token string">'SET'</span><span class="token punctuation">,</span>payload<span class="token operator">:</span><span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">'alien'</span> <span class="token punctuation">,</span> mes<span class="token operator">:</span><span class="token string">'let us learn React!'</span>  <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>Store<span class="token punctuation">}</span> <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>通过在根组件中注入 store ，并在 useEffect 中改变 state 内容。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> info <span class="token punctuation">,</span> number <span class="token punctuation">}</span><span class="token operator">:</span>any <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props  
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>info<span class="token punctuation">.</span>name <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>info<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">'what is your name'</span><span class="token punctuation">}</span> <span class="token punctuation">,</span>
              <span class="token punctuation">{</span>info<span class="token punctuation">.</span>mes <span class="token operator">?</span> info<span class="token punctuation">.</span>mes <span class="token operator">:</span> <span class="token string">' what do you say? '</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            《React进阶实践指南》 <span class="token punctuation">{</span>number<span class="token punctuation">}</span> 👍 <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> state<span class="token punctuation">.</span>number<span class="token punctuation">,</span> info<span class="token operator">:</span> state<span class="token punctuation">.</span>info <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>Index<span class="token punctuation">)</span>
</code></pre></div><ul><li>通过 mapStateToProps 获取指定 state 中的内容，然后渲染视图。</li></ul> <h3 id="_3-实践二-react-redux实现组件通信"><a href="#_3-实践二-react-redux实现组件通信" class="header-anchor">#</a> 3 实践二：React-Redux实现组件通信</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ComponentA</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> toCompB<span class="token punctuation">,</span> compBsay <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* 组件A */</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>CompAsay<span class="token punctuation">,</span> setCompAsay<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;box&quot;</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是组件<span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> <span class="token constant">B</span>组件对我说：<span class="token punctuation">{</span>compBsay<span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        我对<span class="token constant">B</span>组件说：<span class="token operator">&lt;</span>input placeholder<span class="token operator">=</span><span class="token string">&quot;CompAsay&quot;</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCompAsay</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">toCompB</span><span class="token punctuation">(</span>CompAsay<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>确定<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 映射state中CompBsay  */</span>
<span class="token keyword">const</span> <span class="token function-variable function">CompAMapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> compBsay<span class="token operator">:</span> state<span class="token punctuation">.</span>info<span class="token punctuation">.</span>compBsay <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/* 映射toCompB方法到props中 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">CompAmapDispatchToProps</span> <span class="token operator">=</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">toCompB</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">mes</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SET'</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> <span class="token punctuation">{</span> compAsay<span class="token operator">:</span> mes <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/* connect包装组件A */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> CompA <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span>CompAMapStateToProps<span class="token punctuation">,</span> CompAmapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>ComponentA<span class="token punctuation">)</span>
</code></pre></div><ul><li>组件 A 通过 mapStateToProps，mapDispatchToProps，分别将state 中的 compBsay 属性，和改变 state 的 compAsay 方法，映射到 props 中。</li></ul> <h2 id="三-react-redux原理"><a href="#三-react-redux原理" class="header-anchor">#</a> 三 React-Redux原理</h2> <h3 id="第一部分-provider注入store"><a href="#第一部分-provider注入store" class="header-anchor">#</a> 第一部分： Provider注入Store</h3> <h3 id="第二部分-subscription订阅器"><a href="#第二部分-subscription订阅器" class="header-anchor">#</a> 第二部分： Subscription订阅器</h3> <h3 id="第三部分-connect控制更新"><a href="#第三部分-connect控制更新" class="header-anchor">#</a> 第三部分： connect控制更新</h3> <h2 id="四-实现异步"><a href="#四-实现异步" class="header-anchor">#</a> 四 实现异步</h2> <h1 id="react-mobx"><a href="#react-mobx" class="header-anchor">#</a> react-mobx</h1></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/react/react进阶实践指南/源码目录.html" class="prev">
        /react/react进阶实践指南/源码目录.html
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b51e4ccd.js" defer></script><script src="/assets/js/2.7229199a.js" defer></script><script src="/assets/js/61.f62972b8.js" defer></script>
  </body>
</html>
