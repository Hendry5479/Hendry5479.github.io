(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{487:function(t,a,s){"use strict";s.r(a);var n=s(45),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"内存泄漏"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内存泄漏"}},[t._v("#")]),t._v(" 内存泄漏")]),t._v(" "),s("p",[t._v("无引用关系的对象没有被GC，则为内存泄漏")]),t._v(" "),s("h2",{attrs:{id:"常见的内存泄漏"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见的内存泄漏"}},[t._v("#")]),t._v(" ## 常见的内存泄漏")]),t._v(" "),s("h3",{attrs:{id:"不正当闭包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#不正当闭包"}},[t._v("#")]),t._v(" 不正当闭包")]),t._v(" "),s("p",[t._v("有对其他作用域变量的引用未清除，造成内存泄漏")]),t._v(" "),s("h3",{attrs:{id:"隐式全局变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#隐式全局变量"}},[t._v("#")]),t._v(" 隐式全局变量")]),t._v(" "),s("p",[t._v("没有声明，默认挂载全局；在函数中使用this产生隐式全局变量")]),t._v(" "),s("h3",{attrs:{id:"游离dom引用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#游离dom引用"}},[t._v("#")]),t._v(" 游离DOM引用")]),t._v(" "),s("p",[t._v("移除节点时释放缓存的引用")]),t._v(" "),s("p",[t._v("将父节点和子节点的引用全都置空")]),t._v(" "),s("h3",{attrs:{id:"定时器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定时器"}},[t._v("#")]),t._v(" 定时器")]),t._v(" "),s("p",[t._v("clearInterval")]),t._v(" "),s("p",[t._v("clearTimeout")]),t._v(" "),s("p",[t._v("clearAnimationFrame")]),t._v(" "),s("h3",{attrs:{id:"事件监听器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件监听器"}},[t._v("#")]),t._v(" 事件监听器")]),t._v(" "),s("p",[t._v("组件销毁时清除监听器")]),t._v(" "),s("h3",{attrs:{id:"监听者模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监听者模式"}},[t._v("#")]),t._v(" 监听者模式")]),t._v(" "),s("p",[t._v("组件销毁时清除处理函数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    eventBus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("doSomething"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeDestroy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    eventBus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("off")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("doSomething"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  methods"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do something")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"map、set"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#map、set"}},[t._v("#")]),t._v(" Map、Set")]),t._v(" "),s("p",[t._v("两者都是强引用，需要主动清除引用")]),t._v(" "),s("p",[t._v("强引用：直接赋值为堆内存的地址")]),t._v(" "),s("p",[t._v("强引用的obj和Map、Set需要全部引用的清除")]),t._v(" "),s("p",[t._v("使用弱引用的WeakMap和WeakSet，清除引用即可GC")]),t._v(" "),s("h3",{attrs:{id:"console"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#console"}},[t._v("#")]),t._v(" Console")]),t._v(" "),s("p",[t._v("生产环境全部清除")]),t._v(" "),s("h2",{attrs:{id:"定位和修复"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定位和修复"}},[t._v("#")]),t._v(" 定位和修复")])])}),[],!1,null,null,null);a.default=e.exports}}]);